;/*FB_PKG_DELIM*/

__d("CometNotificationsBadgeCountFragment_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"environment"}],kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountFragment_viewer",selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometNotificationsBadgeCountQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"environment"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometNotificationsBadgeCountFragment_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],storageKey:null}]},params:{id:"6243845039071039",metadata:{},name:"CometNotificationsBadgeCountQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometNotificationsBadgeCount.react",["fbt","CometNotificationsBadgeCountFragment_viewer.graphql","CometNotificationsBadgeCountQuery.graphql","CometPlaceholder.react","CometRelay","FDSNumberedBadge.react","hero-tracing","react","react-compiler-runtime","setupNotificationsLiveQuery","unrecoverableViolation","updateWidgetServiceWorker","useMaybeZeroNotificationsBadgeCount"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react")),m=k.useEffect;function a(a){var e=d("react-compiler-runtime").c(14),f=d("CometRelay").useLazyLoadQuery(i!==void 0?i:i=b("CometNotificationsBadgeCountQuery.graphql"),{environment:"MAIN_SURFACE"});f=f.viewer;if(f==null)throw c("unrecoverableViolation")("The viewer recieving these notifications cannot be null","comet_feed");f=d("CometRelay").useFragment(j!==void 0?j:j=b("CometNotificationsBadgeCountFragment_viewer.graphql"),f);var g=c("useMaybeZeroNotificationsBadgeCount")(f==null?void 0:f.notifications_unseen_count);f=a.isBadgeHidden;var k=a.overflow,n=a.setBadgeCount,o=d("CometRelay").useRelayEnvironment(),p;e[0]!==o?(a=function(){var a=c("setupNotificationsLiveQuery")(o);return function(){return a.dispose()}},p=[o],e[0]=o,e[1]=a,e[2]=p):(a=e[1],p=e[2]);m(a,p);e[3]!==g||e[4]!==n?(a=function(){n&&n(g),c("updateWidgetServiceWorker")()},p=[g,n],e[3]=g,e[4]=n,e[5]=a,e[6]=p):(a=e[5],p=e[6]);m(a,p);e[7]===Symbol["for"]("react.memo_cache_sentinel")?(a=l.jsx("span",{}),e[7]=a):a=e[7];e[8]!==g||e[9]!==f||e[10]!==k?(p=f!==!0&&g>0?l.jsx(d("hero-tracing").HeroPagelet,{name:"NotificationsBadge",children:function(a,b){return l.jsxs(l.Fragment,{children:[l.jsx(c("FDSNumberedBadge.react"),{accessibilityText:h._("__JHASH__dtNCkhbask___JHASH__"),overflow:k,ref:a,testid:void 0,value:g}),l.jsx(b,{})]})}}):null,e[8]=g,e[9]=f,e[10]=k,e[11]=p):p=e[11];e[12]!==p?(f=l.jsx(c("CometPlaceholder.react"),{fallback:a,children:p}),e[12]=p,e[13]=f):f=e[13];return f}g["default"]=a}),226);
__d("useFDSProgressRingSvg.react",["FDSProgressRingUtils","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useMemo;var j=b.useRef,k=2;function a(a){var b=d("react-compiler-runtime").c(50),c=a.color,e=a.isHidden;a=a.size;var f=j(null),g=j(null),h=j(null),l;b[0]!==c?(l=d("FDSProgressRingUtils").getRingColor(c),b[0]=c,b[1]=l):l=b[1];c=l;l=c.backgroundColor;c=c.foregroundColor;var m=(a-k)*Math.PI,n;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(n="x1ey2m1c x9f619 xds687c x17qophe x10l6tqk x13vifvy",b[2]=n):n=b[2];var o="0 0 "+a+" "+a,p=a/2,q=a/2,r=(a-k)/2,s;b[3]!==l||b[4]!==p||b[5]!==q||b[6]!==r?(s=i.jsx("circle",{cx:p,cy:q,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:r,stroke:l,strokeLinecap:"round",strokeWidth:k}),b[3]=l,b[4]=p,b[5]=q,b[6]=r,b[7]=s):s=b[7];b[8]!==a||b[9]!==o||b[10]!==s?(l=i.jsx("svg",{className:n,height:a,ref:f,viewBox:o,width:a,children:s}),b[8]=a,b[9]=o,b[10]=s,b[11]=l):l=b[11];b[12]===Symbol["for"]("react.memo_cache_sentinel")?(p="x1ey2m1c xds687c xtzzx4i x6ikm8r x10wlt62 x10l6tqk x13vifvy",q="x1ey2m1c x9f619 xds687c x1ytbgms x10l6tqk x13vifvy x1jpgh95",b[12]=p,b[13]=q):(p=b[12],q=b[13]);r="0 0 "+a+" "+a;n=a/2;o=a/2;s=(a-k)/2;var t=m/2,u=3*m/4,v=e?"hidden":void 0,w;b[14]!==v?(w={visibility:v},b[14]=v,b[15]=w):w=b[15];b[16]!==c||b[17]!==n||b[18]!==o||b[19]!==s||b[20]!==t||b[21]!==u||b[22]!==w?(v=i.jsx("circle",{cx:n,cy:o,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:s,stroke:c,strokeDasharray:t,strokeDashoffset:u,strokeWidth:k,style:w}),b[16]=c,b[17]=n,b[18]=o,b[19]=s,b[20]=t,b[21]=u,b[22]=w,b[23]=v):v=b[23];b[24]!==a||b[25]!==r||b[26]!==v?(n=i.jsx("div",{className:p,children:i.jsx("svg",{className:q,height:a,ref:g,viewBox:r,width:a,children:v})}),b[24]=a,b[25]=r,b[26]=v,b[27]=n):n=b[27];b[28]===Symbol["for"]("react.memo_cache_sentinel")?(o="x1ey2m1c x8cgc45 x17qophe x6ikm8r x10wlt62 x10l6tqk x13vifvy",s="x1ey2m1c x9f619 x14l5gr7 x17qophe x10l6tqk x13vifvy x1jpgh95",b[28]=o,b[29]=s):(o=b[28],s=b[29]);t="0 0 "+a+" "+a;u=a/2;w=a/2;p=(a-k)/2;q=m/2;r=m/4;v=e?"hidden":void 0;b[30]!==v?(m={visibility:v},b[30]=v,b[31]=m):m=b[31];b[32]!==c||b[33]!==u||b[34]!==w||b[35]!==p||b[36]!==q||b[37]!==r||b[38]!==m?(e=i.jsx("circle",{cx:u,cy:w,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:p,stroke:c,strokeDasharray:q,strokeDashoffset:r,strokeWidth:k,style:m}),b[32]=c,b[33]=u,b[34]=w,b[35]=p,b[36]=q,b[37]=r,b[38]=m,b[39]=e):e=b[39];b[40]!==a||b[41]!==t||b[42]!==e?(v=i.jsx("div",{className:o,children:i.jsx("svg",{className:s,height:a,ref:h,viewBox:t,width:a,children:e})}),b[40]=a,b[41]=t,b[42]=e,b[43]=v):v=b[43];b[44]!==n||b[45]!==v||b[46]!==l?(c=i.jsxs(i.Fragment,{children:[l,n,v]}),b[44]=n,b[45]=v,b[46]=l,b[47]=c):c=b[47];u=c;w=u;b[48]!==w?(p={backgroundRef:f,leftCircleRef:h,progressRing:w,rightCircleRef:g},b[48]=w,b[49]=p):p=b[49];return p}g["default"]=a}),98);
__d("CometProgressRingDeterminate.react",["BaseLoadingStateElement.react","react","useFDSProgressRingSvg.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect,k={rootDiv:{position:"x1n2onr6",$$css:!0},rootSizing:function(a){return[{height:a==null?null:"x1f5funs",width:a==null?null:"x1bl4301",$$css:!0},{"--height":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a),"--width":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]}};function a(a){var b=a.color,d=a.percentage,e=a.size,f=a["aria-label"];a=a["aria-labelledby"];b=c("useFDSProgressRingSvg.react")({color:b,isHidden:!1,size:e});var g=b.leftCircleRef,h=b.progressRing,l=b.rightCircleRef;j(function(){var a=l.current,b=g.current;if(a==null||b==null)return;if(!(a instanceof SVGSVGElement)||!(b instanceof SVGSVGElement))return;var c=Math.max(0,Math.min(100,d))/100*360;a.style.transform="rotate("+Math.min(c,180)+"deg)";b.style.transform="rotate("+Math.max(c-180,0)+"deg)"},[g,d,l]);return i.jsx(c("BaseLoadingStateElement.react"),{"aria-label":f,"aria-labelledby":a,progress:d,xstyle:[k.rootDiv,k.rootSizing(e)],children:h})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometTopNavTabBadge.react",["ARIA_LABEL_PLACEHOLDER_FIXME","FDSNumberedBadge.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function a(a){var b=d("react-compiler-runtime").c(18),e,f,g,h,k,l,m;b[0]!==a?(l=a.testid,m=a.value,f=a.isBadgeHidden,g=a.isTab,h=a.overflow,k=a.setBadgeCount,e=babelHelpers.objectWithoutPropertiesLoose(a,["testid","value","isBadgeHidden","isTab","overflow","setBadgeCount"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=k,b[6]=l,b[7]=m):(e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7]);var n;b[8]!==k||b[9]!==m?(a=function(){k&&k(m)},n=[m,k],b[8]=k,b[9]=m,b[10]=a,b[11]=n):(a=b[10],n=b[11]);j(a,n);if(f===!0||m===0)return null;a=g===!0?"red":void 0;b[12]!==e||b[13]!==a||b[14]!==h||b[15]!==l||b[16]!==m?(n=i.jsx(c("FDSNumberedBadge.react"),babelHelpers["extends"]({},e,{accessibilityText:c("ARIA_LABEL_PLACEHOLDER_FIXME"),color:a,overflow:h,testid:void 0,value:m})),b[12]=e,b[13]=a,b[14]=h,b[15]=l,b[16]=m,b[17]=n):n=b[17];return n}g["default"]=a}),98);
__d("LSGetThreadDataFromTam.nop",["I64","LSMessagingThreadTypeUtil","LSResult","LSShape","LSVec","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){b=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.threads).filter(function(a){a=a.threadType;return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a)}).take((h||(h=d("I64"))).to_int32(e))));a=b.map(function(a,b){var c=a.lastActivityTimestampMs,e=a.lastReadWatermarkTimestampMs,f=a.threadKey;a=a.threadType;return d("LSShape").ofRecord({client_thread_pk:f,display_timestamp_ms:c,is_group_thread:d("LSMessagingThreadTypeUtil").isGroup(a),last_activity_timestamp_ms:c,last_read_watermark_timestamp_ms:e,server_thread_key:f,sort_order:(h||(h=d("I64"))).of_int32(b)})});return c("LSResult")(c("LSVec").ofArray(a))});function e(b,c,d){return a.apply(this,arguments)}return e}();g["default"]=a}),98);
__d("LSPlatformClientDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("LSPlatformClient").__setRef("LSPlatformClientDeferred");b=a;g["default"]=b}),98);
__d("LSPlatformClientSingleton",[],(function(a,b,c,d,e,f){"use strict";var g={contents:void 0};function a(a){g.contents=a}f.saveInstance=a}),66);
__d("maybeSetupMAWMainThreadLogger",["MessengerLogHistory","cr:6999","cr:7350","isArmadillo","isRegisterArmadilloOnIgEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MessengerLogHistory").getInstance("client_init"),i=(a=b("cr:6999"))!=null?a:b("cr:7350");e=function(){i!=null&&(c("isArmadillo")()||c("isRegisterArmadilloOnIgEnabled")())&&(h.debug("Starting MAW main thread logger setup..."),i.setupMainWaLogger(),h.debug("Starting MAW main thread logger setup success"))};g.maybeSetupMAWMainThreadLogger=e}),98);
__d("LSPlatformClientInstances",["FBLogger","LSPlatformArmadilloUtils","LSPlatformClientSingleton","LSPlatformLsInitLog","LSSuspense","MAWMIC","MAWMICSafe","MessengerLogHistory","PromiseAnnotate","asyncToGeneratorRuntime","cr:3015","getErrorSafe","maybeSetupMAWMainThreadLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("MessengerLogHistory").getInstance("client_init"),k=(i||(i=c("LSSuspense"))).makeCollection(),l=!1;function a(a,e,f){d("MAWMIC").startMAWMICFlow();l||(j.debug("[Occamadillo] Beginning hardcoded init sync"),l=!0,d("maybeSetupMAWMainThreadLogger").maybeSetupMAWMainThreadLogger());d("LSPlatformArmadilloUtils").reportInitStart();return(i||(i=c("LSSuspense"))).getFromCollection(k,a,function(){return(h||(h=d("PromiseAnnotate"))).setDisplayName(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("LSPlatformLsInitLog").addAnnotations({bool:{fromReact:f==null?void 0:f.fromReact}});j.debug("Messenger loading UI suspending");try{var g=b("cr:3015")!=null?yield b("cr:3015").maybeEvaluateInitSyncEagerly(a):!1;j.debug("Initializing LSPlatformClient...");g=(yield e(a,{didEvaluateInitSyncEagerly:g}));yield g.start();j.debug("Initializing LSPlatformClient success");d("LSPlatformClientSingleton").saveInstance(g);d("LSPlatformArmadilloUtils").reportInitEnd();return g}catch(a){g=c("getErrorSafe")(a);j.debug("Initializing LSPlatformClient failed");d("LSPlatformLsInitLog").fail("client_setup_failure",g);d("MAWMICSafe").fail("client_setup_failure",g);c("FBLogger")("ls_web_init").catching(g).warn("LSPlatformClient initialization failure");throw g}finally{j.debug("Messenger loading UI unsuspending")}})(),"InitLSPlatformClient")})}e={getOrInit:a};g["default"]=e}),98);
__d("LSPlatformClientProviderAddons.react",["CometPlaceholder.react","cr:6495","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){var a=d("react-compiler-runtime").c(1),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"LSPlatformClientProviderAddons",children:b("cr:6495")!=null&&i.jsx(b("cr:6495"),{})}),a[0]=e):e=a[0];return e}g["default"]=a}),98);
__d("LSPlatformClientProviderUtils",["gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("1391")||c("qex")._("527")===!0}g.shouldInitialiseClientConcurrently=a}),98);
__d("MAWCondSetup.react",["cr:3921","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");f=c("gkx")("20836")?a.Fragment:(e=b("cr:3921"))!=null?e:a.Fragment;d=f;g["default"]=d}),98);
__d("MAWCondWrapper.react",["MAWCondSetup.react","MAWSetupWrapperOnce.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.children;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("MAWCondSetup.react"),{}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("MAWSetupWrapperOnce.react"),{setupComponent:e,children:a}),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("LSPlatformClientProvider.react",["CometPlaceholder.react","LSDatabaseAfterInitSyncSingleton","LSPlatformClientInstances","LSPlatformClientProviderAddons.react","LSPlatformClientProviderUtils","LSPlatformErrorsCatcher.react","LSSuspense","MAWCondWrapper.react","ReStoreProvider.react","qex","react","react-compiler-runtime","suspendOrThrowIfUsedInSSR"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||d("react");function m(a,b){var e=d("react-compiler-runtime").c(3);if(e[0]!==a||e[1]!==b){var f=(h||(h=c("LSSuspense"))).getOrSuspend(a);f=c("LSPlatformClientInstances").getOrInit(f,b,{fromReact:!0});e[0]=a;e[1]=b;e[2]=f}else f=e[2];return f}function a(a){var b=d("react-compiler-runtime").c(3),c=a.children,e=a.config;a=a.loadLSPlatformClient;e=m(e,a);b[0]!==c||b[1]!==e.db?(a=l.jsx((j||(j=d("ReStoreProvider.react"))).ReStoreProvider,{db:e.db,children:c}),b[0]=c,b[1]=e.db,b[2]=a):a=b[2];return a}var n=(h||(h=c("LSSuspense"))).makeWithPromise(d("LSDatabaseAfterInitSyncSingleton").LSDatabaseAfterInitSyncSingleton);function o(){(h||(h=c("LSSuspense"))).getOrSuspend(n)}function p(){o();return null}function q(a){var b=a.config;a=a.loadLSPlatformClient;m(b,a);return null}function b(a){var b=d("react-compiler-runtime").c(6),e=a.children,f=a.config;a=a.loadLSPlatformClient;(i||(i=c("suspendOrThrowIfUsedInSSR")))("Messenger is not enabled for SSR");var g;b[0]!==f||b[1]!==a?(g=l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"LSPlatformClientProvider.ClientLoad",children:l.jsx(q,{config:f,loadLSPlatformClient:a})}),b[0]=f,b[1]=a,b[2]=g):g=b[2];b[3]!==e||b[4]!==g?(f=l.jsxs(l.Fragment,{children:[g,e]}),b[3]=e,b[4]=g,b[5]=f):f=b[5];return f}var r=d("LSPlatformClientProviderUtils").shouldInitialiseClientConcurrently()?b:a;function e(a){var b=d("react-compiler-runtime").c(16),e=a.children,f=a.config,g=a.errorFallback,h=a.loadLSPlatformClient;a=a.placeholder;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i=c("qex")._("1755"),b[0]=i):i=b[0];i=i;var j;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(j=l.jsx(c("LSPlatformClientProviderAddons.react"),{}),b[1]=j):j=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(i=i===!0?l.jsx(p,{}):null,b[2]=i):i=b[2];b[3]!==e||b[4]!==a?(i=l.jsxs(c("CometPlaceholder.react"),{fallback:a,name:"LSPlatformClientProvider.UISuspense",children:[i,e]}),b[3]=e,b[4]=a,b[5]=i):i=b[5];b[6]!==f||b[7]!==h||b[8]!==i?(e=l.jsxs(r,{config:f,loadLSPlatformClient:h,children:[j,i]}),b[6]=f,b[7]=h,b[8]=i,b[9]=e):e=b[9];b[10]!==a||b[11]!==e?(j=l.jsx(c("MAWCondWrapper.react"),{children:l.jsx(c("CometPlaceholder.react"),{fallback:a,name:"LSPlatformClientProvider.ClientProvider",children:e})}),b[10]=a,b[11]=e,b[12]=j):j=b[12];b[13]!==g||b[14]!==j?(f=l.jsx(c("LSPlatformErrorsCatcher.react"),{fallback:g,children:j}),b[13]=g,b[14]=j,b[15]=f):f=b[15];return f}g["default"]=e}),98);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.react",["LSPlatformClientDeferred","LSPlatformClientProvider.react","asyncToGeneratorRuntime","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var d=(yield c("LSPlatformClientDeferred").load());return d.make(a,b)});return k.apply(this,arguments)}function a(a){var b=d("react-compiler-runtime").c(5),e=a.children,f=a.config,g=a.errorFallback;a=a.placeholder;var h;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(h=i.jsx(c("LSPlatformClientProvider.react"),{config:f,errorFallback:g,loadLSPlatformClient:j,placeholder:a,children:e}),b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):h=b[4];return h}g["default"]=a}),98);
__d("LSRequestType",[],(function(a,b,c,d,e,f){a=Object.freeze({INIT_SYNC:1,RESUME_SYNC:2,TASK_BATCH:3,FIRE_FORGET:4,RESUME_SYNC_BATCH:5});f["default"]=a}),66);
__d("LSPlatformDGWTransport",["DGWClient","DGWExponentialBackoff","DGWLoggingContext","DGWStreamGroupCallbacks","FBLogger","LSIntEnum","LSLogHistory","LSPlatformDGWHostnameOverride","LSPlatformRealtimeTransport","MWPBumpEntityKey","MessengerWebRegion","Promise","Random","asyncToGeneratorRuntime","err","gkx","promiseDone","setTimeout","unrecoverableViolation","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("gkx")("3218"),k=c("gkx")("2659"),l=c("gkx")("6455"),m=0,n=!1,o=new Map(),p={connectionStatusChangeHandler:null,current:null,publishBuffer:new Map(),reconnectHandler:null,status:"Disconnected",subscribers:new Map()},q=null,r=!1;function s(a){a=1*Math.pow(2,a);a=Math.max(a,1);a=Math.min(a,64);return Math.ceil(a*(1e3+d("Random").random()*200))}function t(a){var b;if(r){var e;(e=p.current)==null?void 0:e.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"SkipReconnectAttempt","deviceId:"+a);return}r=!0;e=s(m++);var f="deviceId:"+a+", reconnectMs:"+e+", attempt:"+m;(b=p.current)==null?void 0:b.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"ScheduleReconnect",f);d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"scheduleReconnect");c("setTimeout")(function(){u(a),r=!1},e)}function u(a){var b={deviceId:a,keepAliveMs:15e3,loggingId:c("uuidv4")(),serviceId:"lightspeed",streamGroupAppHeaders:{},verboseLoggingEnabled:j};d("MessengerWebRegion").regionNullable!=null&&(b.regionHint=d("MessengerWebRegion").regionNullable);var e={onStreamGroupError:function(b){var c;p.connectionStatusChangeHandler&&p.connectionStatusChangeHandler("Disconnected","Stream Group Error");p.status="Disconnected";(c=p.current)==null?void 0:c.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupError",d("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(b),"deviceId:"+a);d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,d("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(b));d("DGWStreamGroupCallbacks").isRetryableError(b)?(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupError.isRetryableError"),t(a)):d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupError.isNotRetryableError")},onStreamGroupMustDrain:function(b){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed","LSPlatformDGWTransport.onStreamGroupMustDrain."+b);(b=p.current)==null?void 0:b.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupMustDrain","deviceId:"+a);t(a)},onStreamGroupTransportClose:function(){var b;p.connectionStatusChangeHandler&&p.connectionStatusChangeHandler("Disconnected","Stream Group Close");p.status="Disconnected";(b=p.current)==null?void 0:b.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupTransportClose","","deviceId:"+a)}};p.status="Connecting";e=c("DGWClient")().createStreamGroup(e,b);e.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"CreatingStreamGroupTransport","deviceId:"+a);c("promiseDone")(e.initTransport(),function(b){d("LSLogHistory").log("StreamGroupTransport Connected","debug");p.status="Connected";p.connectionStatusChangeHandler&&p.connectionStatusChangeHandler("Connected");n&&(p.reconnectHandler&&p.reconnectHandler());n=!0;(b=p.current)==null?void 0:b.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnOpen","deviceId:"+a);(b=p.current)==null?void 0:b.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"BufferFlushed",String(p.publishBuffer.size));m=0;p.publishBuffer.forEach(function(a,b,c){a.resolve(),p.publishBuffer["delete"](b)})},function(b){var c;d("LSLogHistory").log("StreamGroupTransport onError","debug");p.status="Disconnected";p.publishBuffer.clear();p.connectionStatusChangeHandler&&p.connectionStatusChangeHandler("Disconnected",b);(c=p.current)==null?void 0:c.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnError",String(b),"deviceId:"+a);d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"WebSocketOnError");t(a)});p.current=e;return p.current}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=p.current;if(b==null)throw c("unrecoverableViolation")("LS Stream Group not initialized","ls_web_init");var e=new TextDecoder(),f={LSRequestType:"SYNC",method:"LightSpeed","xrs-stream-handler":"LSDGWStreamHandler"};d("LSPlatformDGWHostnameOverride").useHostNameOverride&&d("LSPlatformDGWHostnameOverride").hostNameOverride!=null&&(f["javascript-sandbox"]=d("LSPlatformDGWHostnameOverride").hostNameOverride);try{b=(yield b.establishStream({groupedStreamHeaders:f,loggingId:c("uuidv4")(),verboseLoggingEnabled:j},{onClose:function(){d("LSLogHistory").log("Stream closed","debug")},onDataReceived:function(a){var b=e.decode(a);p.subscribers.forEach(function(a){a(b)})},onError:function(a){d("LSLogHistory").log("Stream onError. Disconnected","debug")},onServerHasFinishedSendingData:function(a){d("LSLogHistory").log("Stream finished sending data","debug"),a.loggingContext().logEvent(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"onServerHasFinishedSendingData"),a.close()},onStreamMustDrain:function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed","LSPlatformDGWTransport.onStreamMustDrain"),d("LSLogHistory").log("Stream must drain","debug"),a.loggingContext().logEvent(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"onStreamMustDrain"),a.close()}}));d("LSLogHistory").log("Stream Connected","debug");return b}catch(b){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStreamFailure."+a);d("LSLogHistory").log("Error Establishing Stream. Disconnected","debug");throw b}});return w.apply(this,arguments)}var x="Disconnected";e=function(){return x};function a(a,b){if(l){q||(q=y(a,b));return q}else{var c=o.get(b);c||(c=y(a,b),o.set(b,c));return c}}function y(a,e){var f=new TextEncoder();u(e);return{cleanup:function(){var a;(a=p.current)==null?void 0:a.close();p.reconnectHandler=null;p.connectionStatusChangeHandler=null;p.publishBuffer.clear();p.subscribers.clear()},logEvent:function(a){var b;(b=p.current)==null?void 0:b.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,a)},onConnectionStatusChange:function(a){p.connectionStatusChangeHandler=a;return function(){p.connectionStatusChangeHandler=null}},onReconnect:function(a){p.reconnectHandler=a;return function(){p.reconnectHandler=null}},publish:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=(i||(i=d("LSIntEnum"))).toNumber(e);try{d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStream."+(i||(i=d("LSIntEnum"))).toNumber(e));p.status!=="Connected"&&(yield z().then(function(){})["catch"](function(){var a;d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"ConnectionTimeout."+g);(a=p.current)==null?void 0:a.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Publish","ConnectionTimeout",String(g));return new(h||(h=b("Promise")))(function(a,b){return b({RE_EXN_ID:d("LSPlatformRealtimeTransport").NotConnected})})}));var j=function(){return v(g)};j=k?yield d("DGWExponentialBackoff").callWithExponentialBackoff(j):yield v(g);try{4===(i||(i=d("LSIntEnum"))).unwrapIntEnum(e)?j.sendAndForget(f.encode(a)):yield j.send(f.encode(a))}catch(a){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"sendFailure."+g);throw a}}catch(a){a.message==="Max number of stream IDs reached"&&d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamIdLimitExceeded."+g);d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStreamError."+g);(e=p.current)==null?void 0:e.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Publish","Failed to publish payload",g.toString());c("FBLogger")("messenger_web_product").catching(typeof a==="string"?c("err")(a):a).warn("Failed to create DGW stream and send payload %s",String(a));return new(h||(h=b("Promise")))(function(b,c){return c(a)})}});function e(b,c){return a.apply(this,arguments)}return e}(),subscribe:function(a){p.subscribers.set(a,a);return function(){p.subscribers["delete"](a)}}}}function z(){var a={reject:function(){},resolve:function(){}},c=d("Random").uint32(),e=new(h||(h=b("Promise")))(function(b,c){a.resolve=b,a.reject=c});p.publishBuffer.set(c,a);return e}g.getStatusForDebugging=e;g.LSPlatformDGWTransport=a}),98);
__d("LSPlatformGraphQLLightspeedRequestQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b},params:{id:"9944623912245126",metadata:{},name:"LSPlatformGraphQLLightspeedRequestQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("LSPlatformGraphQLLightspeedRequestQuery",["LSPlatformGraphQLLightspeedRequestQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("LSPlatformGraphQLLightspeedRequestQuery.graphql");g.query=a}),98);
__d("LSPlatformGraphQLLightspeedRequest",["CometRelay","LSPlatformGraphQLLightspeedRequestQuery","XPlatRelayEnvironment"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){return d("CometRelay").fetchQuery(d("XPlatRelayEnvironment").getRelayEnvironment(),d("LSPlatformGraphQLLightspeedRequestQuery").query,{deviceId:a,requestId:b,requestPayload:c,requestType:e}).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:a.lightspeed_web_request;if(a!=null)return babelHelpers["extends"]({dependencies:void 0},a)})}g["default"]=a}),98);
__d("LSPlatformLogTooManyPendingTasksForS337085.react",["FBLogger","MWPBumpEntityKey","ReQL","clearTimeout","gkx","justknobx","promiseDone","react","react-compiler-runtime","setTimeout","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useEffect,k=b.useRef,l=c("justknobx")._("1134"),m=c("justknobx")._("1135"),n=c("gkx")("24156");function a(){var a=d("react-compiler-runtime").c(4),b=(h||(h=c("useReStore")))(),e=k(null),f=k(!1),g;a[0]!==b.tables.pending_tasks?(g=function(){var a=b.tables.pending_tasks.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.tables.pending_tasks).take(l)),function(a){var b=a.length;if(b===l){if(e.current!=null)return;e.current=c("setTimeout")(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","tasks_table_above_threshold"),f.current=!0,n&&c("FBLogger")("lsplatform_tasks","tasks_table_above_threshold").warn("pending tasks table is above threshold. It has %s tasks after %s ms",b,m)},m)}else c("clearTimeout")(e.current),f.current&&n&&c("FBLogger")("lsplatform_tasks","tasks_table_cleared").warn("pending tasks table is now cleared"),f.current=!1})});return function(){a()}},a[0]=b.tables.pending_tasks,a[1]=g):g=a[1];var i;a[2]!==b?(i=[b],a[2]=b,a[3]=i):i=a[3];j(g,i);return null}g["default"]=a}),98);
__d("LSPlatformMessengerConfig",["CurrentMessengerUser","LSDatabaseSingleton","LSDatascriptEvaluatorMaybeDeferred","LSDedicatedMqttChannel","LSPlatformDGWTransport","LSPlatformGraphQLLightspeedRequest","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSSuspense","LSVersion","ServerAppID","cr:3239","cr:8688","getMWLSRegion","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;h=(h=b("cr:3239"))!=null?h:c("LSPlatformGraphQLLightspeedRequest");function a(){return(j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton}function e(a,b){return 3===a?d("LSPlatformDGWTransport").LSPlatformDGWTransport(c("LSVersion"),b):c("LSPlatformMqttRealtimeTransport")(c("LSVersion"),b,{getInstance:d("LSDedicatedMqttChannel").getInstance(d("CurrentMessengerUser").isLoggedInNow),shutdownAndClear:d("LSDedicatedMqttChannel").shutdownAndClear})}function f(){return c("LSDatascriptEvaluatorMaybeDeferred")()}b={appId:c("ServerAppID").app_id,eagerEvaluatorForInitSync:b("cr:8688"),executeGraphQLLightSpeedRequest:c("gkx")("3889")?h:c("LSPlatformGraphQLLightspeedRequest"),getDb:a,getEval:f,platformName:"Messenger",realtimeUnderylingTransport:e,region:c("getMWLSRegion")(),schemaVersion:c("LSVersion"),sendHardcodedInitSync:!0,syncParams:c("LSPlatformMessengerSyncParams")};h=(i||(i=c("LSSuspense"))).makeWithValue(b);g.config=b;g.configEagerlyLoaded=h}),98);
__d("LSScheduleOccamThreadsIntegrityChecker",["LSGetCursor","LSGetThreadDataFromTam.nop","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.storedProcedure(b("LSGetCursor"),c.i64.cast([0,95])).then(function(a){return a=a,d[0]=a[0],a})},function(b){return d[1]=c.createArray(),d[2]=c.createArray(),c.i64.neq(a[1],void 0)?d[3]=a[1]:d[3]=c.i64.cast([0,20]),c.forEach(c.db.table(220).fetch([[[c.i64.cast([0,95]),c.i64.cast([0,0])]]]),function(a){a=a.item;return d[10]=a.minLastActivityTimestampMs,d[9]=new c.Map(),d[9].set("has_more_before",a.hasMoreBefore),d[9].set("is_loading_before",a.isLoadingBefore),d[9].set("min_last_activity_timestamp_ms",d[10]),d[9].set("min_thread_key",a.minThreadKey),d[9].set("parent_thread_key",c.i64.cast([0,0])),d[11]=(d[2].push(d[9]),d[2]),c.forEach(c.islc(c.filter(c.db.table(9).fetch([[[{gte:d[10]}]],"lastActivityTimestampMs"]),function(a){return c.i64.ge(a.lastActivityTimestampMs,d[10])&&c.i64.eq(a.syncGroup,c.i64.cast([0,95]))&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(d[3])),function(a){a=a.item;return d[11]=new c.Map(),d[11].set("authority_level",a.authorityLevel),d[11].set("folder_name",a.folderName),d[11].set("last_activity_timestamp_ms",a.lastActivityTimestampMs),d[11].set("last_read_watermark_timestamp_ms",a.lastReadWatermarkTimestampMs),d[11].set("thread_key",a.threadKey),d[12]=(d[1].push(d[11]),d[1])})})},function(a){return d[4]=c.createArray(),c.nativeOperation(b("LSGetThreadDataFromTam.nop"),d[3]).then(function(a){return a=a,d[5]=a[0],a})},function(a){return d[6]=c.createArray(),d[7]=new c.Map(),d[7].set("cursor",d[0]),d[7].set("mi_act_mapping_columns_for_integrity_check",d[6]),d[7].set("occam_threads_columns_for_integrity_check",d[1]),d[7].set("threads_ranges_columns_for_integrity_check",d[2]),d[7].set("tam_threads_columns_for_integrity_check",d[5]),d[8]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTask"),"occam-threads-integrity-check",c.i64.cast([0,701]),d[8],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxScheduleOccamThreadsIntegrityCheckerStoredProcedure";a.__tables__=["sync_group_threads_ranges","threads"];e.exports=a}),null);
__d("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure",["LSScheduleOccamThreadsIntegrityChecker","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});e=c("LSScheduleOccamThreadsIntegrityChecker")(e.delayMs,e.maxThreadCount,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("MessengerWaitForEvent",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d){var e,f=d;return new(g||(g=b("Promise")))(function(b){f?e=function(){f.apply(this,arguments)&&b.apply(this,arguments)}:e=b,a==null?void 0:a.addEventListener==null?void 0:a.addEventListener(c,e)})["finally"](function(){a==null?void 0:a.removeEventListener==null?void 0:a.removeEventListener(c,e)})}f.waitForEvent=a}),66);
__d("LocalStorageMutex",["MessengerWaitForEvent","Promise","QPLUserFlow","emptyFunction","err","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=1e3,k=c("qpl")._(1056847375,"584");a=function(){function a(a){var b=this,d=a.mutexKey,e=a.localTakeoverKey,f=a.log,g=a.logError,h=a.getStorage,i=a.setItemGuarded,k=a.mutexTimeoutMs;k=k===void 0?j:k;a=a.mutexTimeoutCallback;this.mutexFilter=function(a){if(a.key!==b.$1)return!1;a=a.newValue||"";return!a.includes(c("pageID"))};this.$1=d;this.$2=e;this.$5=h;this.$6=i;this.$3=f;this.$4=g;this.$7=k;this.$8=a}var e=a.prototype;e.init=function(){c("QPLUserFlow").start(k);this.$3("APPMUTEX - this tab is "+c("pageID"));var a=this.getMutex();if(a===c("pageID")){this.$3("APPMUTEX - WE ALREADY HAVE THE MUTEX LOCK WITHIN INIT");c("QPLUserFlow").endSuccess(k);return(h||(h=b("Promise"))).resolve(!0)}if(a!=null){this.$3("APPMUTEX - initiating localTAKEOVER");return this.localTakeover()}else{this.$3("APPMUTEX - NO1 ELSE IS ALIVE, GET THE MUTEX");a=this.$9(c("pageID"));var d=this.$10(c("pageID"));if(!a.success||!d.success){c("QPLUserFlow").addAnnotations(k,{bool:{setMutexResult:d.success,setTakeoverResult:a.success},string:{setMutexError:d.error,setTakeoverError:a.error}});c("QPLUserFlow").endFailure(k,"fail_to_set_takeover_or_mutex");return(h||(h=b("Promise"))).resolve(!1)}c("QPLUserFlow").endSuccess(k);return(h||(h=b("Promise"))).resolve(!0)}};e.localTakeover=function(){var a,e=this,f=this.$9(c("pageID"));if(!f.success){c("QPLUserFlow").addAnnotations(k,{string:{initTakeoverError:f.error}});c("QPLUserFlow").endFailure(k,"local_takeover_init_takeover_failure");return(h||(h=b("Promise"))).resolve(!1)}var g,i=function(){g!=null&&clearTimeout(g)};f=d("MessengerWaitForEvent").waitForEvent(window,"storage",this.mutexFilter);var l=(a=this.$7)!=null?a:j;return(h||(h=b("Promise"))).race([f,new h(function(a){g=setTimeout(function(){a()},l)}),this.$8?this.$8():new(h||(h=b("Promise")))(c("emptyFunction"))]).then(function(a){if(a==null){e.$3("AppMutex - Forcefully took the mutex and takeover lock");var b=e.$9(c("pageID")),d=e.$10(c("pageID"));if(!b.success||!d.success){c("QPLUserFlow").addAnnotations(k,{string:{setMutexError:d.error,setTakeoverError:b.error}});c("QPLUserFlow").endFailure(k,"local_takeover_forcefully_takeover_failure");return!1}c("QPLUserFlow").endSuccess(k);return!0}e.$3("APPMUTEX - GOT MUTEX STORAGE EVENT CHANGE FROM ANOTHER TAB");d=e.$11(a.newValue);if(!d&&e.hasTakeoverPermission()){e.$3("APPMUTEX - setting mutex on localtakeover");b=e.$10(c("pageID"));if(!b.success){c("QPLUserFlow").addAnnotations(k,{string:{setMutexError:b.error}});c("QPLUserFlow").endFailure(k,"local_takeover_set_mutex_failure");return!1}c("QPLUserFlow").endSuccess(k);return!0}else{e.hasTakeoverPermission()&&e.$12();c("QPLUserFlow").endFailure(k,"local_takeover_no_takeover_permission");return!1}}).then(function(a){i();return a})["catch"](function(a){i();e.$4("AppMutex - localTakeover error no permission - "+a);c("QPLUserFlow").endFailure(k,"local_takeover_general_failure");return!1})};e.onMutexDeath=function(){var a=this.getMutex();a!=null&&a===c("pageID")&&(this.$3("APPMUTEX - removing mutex on death"),this.$13(),this.hasTakeoverPermission()&&this.$12())};e.takeoverFilter=function(a){if(a.key!==this.$2)return!1;a=a.newValue||"";return!a.includes(c("pageID"))};e.$14=function(){if(!i){var a=this.$5();if(!a)throw c("err")("Could not get localStorage");i=a}return i};e.getMutex=function(){i=this.$14();return i.getItem(this.$1)};e.$10=function(a){i=this.$14();return this.$6(i,this.$1,a)};e.$13=function(){i=this.$14(),i.removeItem(this.$1)};e.getTakeover=function(){i=this.$14();return i.getItem(this.$2)};e.$9=function(a){i=this.$14();return this.$6(i,this.$2,a)};e.$12=function(){i=this.$14(),i.removeItem(this.$2)};e.$11=function(a){return a!=null?a:""};e.hasTakeoverPermission=function(){var a=this.getTakeover();return a!=null&&a===c("pageID")};return a}();g.THIS_TAB=c("pageID");g.LocalStorageMutex=a}),98);
__d("MAWAppMutex",["LocalStorageMutex","MAWLocalStorage","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h="armadillo_msgr_mutex",i="armadillo_msgr_local_takeover",j=null;function a(){j==null&&(j=new(d("LocalStorageMutex").LocalStorageMutex)({getStorage:d("MAWLocalStorage").getStorage,localTakeoverKey:i,log:function(a){d("WALogger").LOG([a])},logError:function(a){d("WALogger").ERROR([a])},mutexKey:h,setItemGuarded:d("MAWLocalStorage").setItemGuarded}));return j}g.MAW_MUTEX_KEY=h;g.MAW_LOCALTAKEOVER_KEY=i;g.use=a}),98);
__d("MAWBridgeReceivedChatStateHandler",["I64","MAWMiActOnMiThreadReadyForJid","Promise","ServerTime","WAChatState","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){return d("MAWMiActOnMiThreadReadyForJid").onMiThreadReadyForJidNoThrow(a,e.threadJid,"MAWBridgeReceivedChatStateHandler",function(a,f){var g=(i||(i=d("I64"))).of_string(e.senderId),j=i.of_float(3e3+d("ServerTime").getMillis());if(e.state===d("WAChatState").TYPING)return a.typing_indicator.upsert([f,g],{expirationTimestampMs:j,senderId:g,threadKey:f}).then(c("emptyFunction"));else if(e.state===d("WAChatState").IDLE)return a.typing_indicator["delete"](f,g).then(c("emptyFunction"));else return(h||(h=b("Promise"))).resolve()})}g.call=a}),98);
__d("MAWCommonBackendSetup",["EARInitType","MAWAppMutex","MAWEncryptionIndexedDbV2","MAWInit","MAWInitError","MAWIssueNewUserVisibleErrors","MAWLocalStorage","MAWSetupWorker","MAWVaultMaterialsStorage","MAWWorkerReboot","MWSetupDBEncryption","Promise","asyncToGeneratorRuntime","gkx","requireDeferredForDisplay","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferredForDisplay")("MAWMainThreadLogger").__setRef("MAWCommonBackendSetup");function a(a,b,c,d,e){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,j){yield a.measurePerformance("prepare_logger",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=i.load();(yield a).setupMainWaLogger()}));var k=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();k||(yield a.measurePerformance("detection_support",function(){if(!d("MAWLocalStorage").isLocalStorageAvailable())throw new(d("MAWInitError").MAWInitError)("localstorage_not_supported");return(h||(h=b("Promise"))).resolve()}));var l=a.measurePerformance("setup_vault_materials",function(){return d("MAWVaultMaterialsStorage").setupVaultMaterials()}),m=function(){if(c("gkx")("1543")===!0)if(k)return(h||(h=b("Promise"))).resolve(!0);else return a.measurePerformance("acquire_mutex",function(){return d("MAWAppMutex").use().init()});else return a.measurePerformance("acquire_mutex",function(){try{var a=d("MAWAppMutex").use().init();return k?a.then(function(){return(h||(h=b("Promise"))).resolve(!0)},function(){return(h||(h=b("Promise"))).resolve(!0)}):a}catch(a){if(k)return(h||(h=b("Promise"))).resolve(!0);throw a}})};m=(yield m());var n=(yield a.measurePerformance("main_ear_setup",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("MWSetupDBEncryption").setPerformanceMeasurementTool(d("MAWInit").MAWInit.measurePerformance);var a=(yield d("MWSetupDBEncryption").init(c("EARInitType").MAW_INIT));d("MAWEncryptionIndexedDbV2").maybeSetEncryptionDbOnVersionChange(function(){var a;(a=d("MAWIssueNewUserVisibleErrors")).issueError(a.MAWLegacyUserErrorMsgBody,a.MAWLegacyUserErrorMsgTitle,a.MAWUserVisibleErrorPresentationType.BANNER)});return a})));if(!n.success){a.logPoint("keychain_setup_failure");throw new(d("MAWInitError").MAWInitError)("keychain_setup_failure",n.payload)}if(!m){a.logPoint("maw_appmutex_no_permission");throw new(d("MAWInitError").MAWInitError)("maw_appmutex_no_permission")}var o=(yield l);c("gkx")("8640")?yield a.measurePerformance("setup_worker",function(){return d("MAWSetupWorker").getOrSetupWorker(o,e,f,g,j)["catch"](function(b){a.logPoint("reboot_worker_on_backend_setup_failure");a.addStringAnnotation("backend_setup_failure_reason",b.message);return d("MAWWorkerReboot").rebootWorker(o,e,f,g,"backend_setup_failure")["catch"](function(a){throw new(d("MAWInitError").MAWInitError)("worker_setup_error",a)})})}):yield a.measurePerformance("setup_worker",function(){return d("MAWSetupWorker").getOrSetupWorker(o,e,f,g,j)["catch"](function(a){throw new(d("MAWInitError").MAWInitError)("worker_setup_error",a)})})});return j.apply(this,arguments)}g.setupArmadilloBackend=a}),98);
__d("useMWEncryptedBackupsProcessBackupIdsDeferred",["gkx","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect,j=c("requireDeferred")("MWEncryptedBackupsProcessBackupIdsDEPRECATED").__setRef("useMWEncryptedBackupsProcessBackupIdsDeferred");function a(a){var b=d("react-compiler-runtime").c(4),e=c("useAsyncReStore")(),f,g;b[0]!==e||b[1]!==a?(f=function(){var b,d;d=!1;j.onReadyImmediately(function(f){c("promiseDone")(e,function(e){!d&&!c("gkx")("8733")&&(b=f.subscribeToEncryptedBackupsRow(e,a))})});return function(){d=!0,b==null?void 0:b()}},g=[e,a],b[0]=e,b[1]=a,b[2]=f,b[3]=g):(f=b[2],g=b[3]);i(f,g)}g["default"]=a}),98);
__d("MAWCommonSetup",["EARInitType","MAWBridgeFireAndForget","MAWCommonBackendSetup","MAWCurrentUser","MAWDBKeychain","MAWEARKeychainDecryptionError","MAWEncryptedBackupsStateManager","MAWIndexedDbMetadata","MAWInit","MAWInitError","MAWIsIDBOperational","MAWIssueNewUserVisibleErrors","MAWJobDefinitions","MAWMIC","MAWStateContext.react","MAWUIJob","MAWUnrecoverableDbErrors","MAWWaitForBackendSetup","MWEARKeychainV3","MWSetupDBEncryption","MessengerWebInitData","WABridge","WADynamicRouterSync","WAHex","WAJobOrchestratorTypes","WALogger","WAPREMetrics","asyncToGeneratorRuntime","cr:11340","cr:11341","cr:12011","getErrorSafe","gkx","maybeSetupMAWMainThreadLogger","performance","promiseDone","react","react-compiler-runtime","requireDeferred","useMWEncryptedBackupsProcessBackupIdsDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error performing verifyEBDBIntegrity: ",""]);j=function(){return a};return a}e=i||d("react");var k=e.useContext,l=e.useEffect,m=c("requireDeferred")("FBLogger").__setRef("MAWCommonSetup"),n=!1,o=function(){return(h||(h=c("performance"))).now()},p=function(a){d("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(a),d("MAWBridgeFireAndForget").fireAndForget("backend","setEncryptedBackupsState",{newState:a})};function a(a){var b=d("react-compiler-runtime").c(5),e=k(d("MAWStateContext.react").MAWDispatchContext),f=d("MAWIsIDBOperational").useIsIDBOperational(),g,h;b[0]!==e||b[1]!==f||b[2]!==a?(g=function(){f&&c("promiseDone")(q(e,a))},h=[a,e,f],b[0]=e,b[1]=f,b[2]=a,b[3]=g,b[4]=h):(g=b[3],h=b[4]);l(g,h);c("useMWEncryptedBackupsProcessBackupIdsDeferred")(p)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.logout,g=e.reregisterDevice,h=e.rotateCryptoAuthToken,i=e.setupBridge;if(n){void m.load().then(function(a){a("messenger_e2ee_web").warn("Armadillo already setup - return")});return}n=!0;d("MAWMIC").startMAWMICFlow();d("MAWInit").MAWInit.start();b("cr:12011")&&c("promiseDone")(b("cr:12011").load().then(function(e){d("maybeSetupMAWMainThreadLogger").maybeSetupMAWMainThreadLogger(),c("promiseDone")(d("MWSetupDBEncryption").init(c("EARInitType").MAW_IN_UI_INIT).then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield d("MAWDBKeychain").initEARUI()),f=c.useMawEAR;a({tag:"SetIsMAWDBinUILoaded"});return e.makeDB(d("MWEARKeychainV3").getDbEncryptionKey,d("MAWWaitForBackendSetup").waitForBackendSetup("ui_dexie").then(function(){return void 0})).then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){f&&d("MWEARKeychainV3").setNamespaceSourceDbAndMarkAsReady("maw_ear",(yield e.getDB()).stores.backendDB())}))})),function(){},function(a){return m.load().then(function(b){return b("messenger_e2ee_web").catching(a).mustfix("UI Dexie initialisation failed: %s",a.message)})})}));b("cr:11340")!=null&&(d("WAPREMetrics").subscribe(function(){}),d("maybeSetupMAWMainThreadLogger").maybeSetupMAWMainThreadLogger(),c("promiseDone")(d("MWSetupDBEncryption").init(c("EARInitType").MAW_IN_UI_INIT).then(function(){return b("cr:11340").makeEBDB(d("MAWIndexedDbMetadata").ebdbName(d("MAWCurrentUser").getID()),d("WAHex").parseHex(c("MessengerWebInitData").accountKeyV2))}),function(){},function(a){return m.load().then(function(b){return b("labyrinth_web").catching(a).mustfix("EBDB initialisation failed: %s",a.message)})}),c("promiseDone")(d("MAWWaitForBackendSetup").waitForBackendSetup("EBDB Integrity check").then(function(){globalThis.setInterval(function(){b("cr:11341")==null?void 0:b("cr:11341").verifyEBDBIntegrity()["catch"](function(a){d("WALogger").ERROR(j(),a)})},2e4)})));d("WABridge").makeWABridge(new(d("WADynamicRouterSync").DynamicRouterSync)());try{d("MAWIssueNewUserVisibleErrors").deleteAllErrors(),yield d("MAWCommonBackendSetup").setupArmadilloBackend(d("MAWInit").MAWInit,function(b){return i({dispatch:a,logout:f,reregisterDevice:g,rotateCryptoAuthToken:h,worker:b})},function(){a({tag:"InitOfflineQueueSyncComplete",value:void 0}),a({tag:"IsDbMigrating",value:!1}),d("MAWMIC").onConnectToExistingWorker()},function(){a({tag:"InitOfflineQueueSyncComplete",value:void 0}),a({tag:"IsDbMigrating",value:!1})},"mawInit"),d("MAWUIJob").UIJobStarters.fireAndForget(d("MAWJobDefinitions").jobSerializers.handleFutureproofMsg({priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW})),d("MAWInit").MAWInit.addIntAnnotation("endTimePageRelative",o()),d("MAWInit").MAWInit.endSuccess()}catch(a){var k,l=c("getErrorSafe")(a);e=l instanceof d("MAWInitError").MAWInitError?l.message:"maw_init_failure";l.message=(k=l.message)!=null?k:"Unknown";l instanceof d("MAWInitError").MAWInitError&&l.error instanceof c("MAWEARKeychainDecryptionError")&&!c("gkx")("8096")&&d("MAWUnrecoverableDbErrors").setError(new(d("MAWUnrecoverableDbErrors").EarInitError)(l));k=l.message==="maw_appmutex_no_permission"&&document.visibilityState!=="visible";k?d("MAWInit").MAWInit.cancel(e,l):(d("MAWWaitForBackendSetup").rejectBackendSetup(l),d("MAWInit").MAWInit.fail(e,l));d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER,l.message);l&&void m.load().then(function(a){a("messenger_e2ee_web").catching(l).mustfix("MAW backend setup failed -- %s",l.message)});throw l}});return r.apply(this,arguments)}g.useArmadillo=a}),98);
__d("MAWDBUsageMetrics",["FBLogger","WebStorageEstimator","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("WebStorageManagerEstimatesFalcoEvent").__setRef("MAWDBUsageMetrics");function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield d("WebStorageEstimator").estimateStorage());h.onReady(function(b){c("FBLogger")("maw_db").debug("Sending storage manager estimates falco event, quota: %s, usage: %s, usage_details: %s",a==null?void 0:a.quota,a==null?void 0:a.usage,JSON.stringify(a==null?void 0:a.usageDetails)),b.log(function(){var b;return{quota:String((b=a==null?void 0:a.quota)!=null?b:0),usage:String((b=a==null?void 0:a.usage)!=null?b:0),usage_details:{caches:String((b=a==null?void 0:(b=a.usageDetails)==null?void 0:b.caches)!=null?b:0),indexedDB:String((b=a==null?void 0:(b=a.usageDetails)==null?void 0:b.indexedDB)!=null?b:0),serviceWorkerRegistrations:String((b=a==null?void 0:(b=a.usageDetails)==null?void 0:b.serviceWorkerRegistrations)!=null?b:0)}}})})}catch(a){c("FBLogger")("maw_db").warn("Error while getting the storage manager estimate: %s",a);return}});return i.apply(this,arguments)}g.logMAWDBUsageMetrics=a}),98);
__d("toMsgrUserJid",["MAWJids"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("MAWJids").toUserJid}),98);
__d("MAWFetchContacts",["I64","LSContactTypeExact","LSIntEnum","MAWContactRelationshipType","ReQL","WAJids","asyncToGeneratorRuntime","requireDeferred","toMsgrUserJid"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWFetchContacts");function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j.load());b=(yield b());var e=new Set(a.map(function(a){return d("WAJids").extractUserId(a)}));return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.tables.contacts).filter(function(a){return e.has((h||(h=d("I64"))).to_string(a.id))})).then(function(a){return new Map(a.map(function(a){return[c("toMsgrUserJid")((h||(h=d("I64"))).to_string(a.id)),a]}))})});return l.apply(this,arguments)}function a(a){return k(a).then(function(a){var b=new Map();a.forEach(function(a,c){b.set(c,d("MAWContactRelationshipType").getContactRelationshipType(a))});return b})}function e(a){return k(a).then(function(a){var b=new Map();a.forEach(function(a,e){a=a.contactTypeExact!=null&&(h||(h=d("I64"))).equal(a.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB));b.set(e,a)});return b})}g.fetchContacts=k;g.fetchContactsRelationships=a;g.fetchContactsIsMsplit=e}),98);
__d("MAWIndexedDbUIDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("MAWIndexedDbUI").__setRef("MAWIndexedDbUIDeferred");b=a;g["default"]=b}),98);
__d("MWXProgressRing.react",["cr:6782","cr:6783","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var c=d("react-compiler-runtime").c(8),e=a.color,f=a.percentage;a=a.size;if(b("cr:6782")!=null){var g,h,j;g=(g=e)!=null?g:"light";h=(h=f)!=null?h:0;j=(j=a)!=null?j:16;var k;c[0]!==g||c[1]!==h||c[2]!==j?(k=i.jsx(b("cr:6782"),{color:g,percentage:h,size:j}),c[0]=g,c[1]=h,c[2]=j,c[3]=k):k=c[3];return k}if(b("cr:6783")!=null){c[4]!==e||c[5]!==f||c[6]!==a?(g=i.jsx(b("cr:6783"),{color:e,percentage:f,size:a}),c[4]=e,c[5]=f,c[6]=a,c[7]=g):g=c[7];return g}return null}g["default"]=a}),98);
__d("mwReplaceToast",["BaseToasterStateManager","MWXToast.react","err","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("BaseToasterStateManager").getInstance();function a(a){var b=a.body,d=a.icon,e=a.startAddOn;e=e===void 0?null:e;var f=a.supressCloseButton;f=f===void 0?!1:f;var g=a.title,h=a.toastId;if(h==null){c("err")("toastId or toasterStateManager is not provided");return}j.replace(h,i.jsx(c("MWXToast.react"),{body:b,icon:d,onDismiss:function(){return j.expire(h)},startAddOn:e,supressCloseButton:f,title:g}))}g.mwReplaceToast=a}),98);
__d("MAWLoadingSpinner.react",["BaseToasterStateManager","MWXIconCheckmarkCircle","MWXIconStrict.react","MWXProgressRing.react","MWXSpinner.react","mwPushToast","mwReplaceToast","react","react-compiler-runtime","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useLayoutEffect,l=b.useRef,m=c("BaseToasterStateManager").getInstance();function n(a,b,d,e){e===void 0&&(e=0);if(a==="spinner")return{icon:{comet:i.jsx(c("MWXSpinner.react"),{color:b?"light":"dark",size:24})},startAddOn:{type:"spinner"},title:d};else if(a==="progressRing")return{icon:{comet:i.jsx(c("MWXProgressRing.react"),{color:b?"light":"dark",size:24})},startAddOn:{source:e,type:"progressRing"},title:d};else return{icon:{comet:i.jsx(c("MWXSpinner.react"),{color:b?"light":"dark",size:24})},startAddOn:{type:"spinner"},title:d}}function o(a,b){d("mwReplaceToast").mwReplaceToast({icon:{comet:i.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconCheckmarkCircle"),size:24}),mds:c("MWXIconCheckmarkCircle").component},title:b,toastId:a})}function a(a,b,e,f,g,h){var i=d("react-compiler-runtime").c(10),p=l(),q,r;i[0]!==f||i[1]!==b||i[2]!==h||i[3]!==e||i[4]!==g||i[5]!==a?(q=function(){if(g)p.current==null?p.current=d("mwPushToast").mwPushToast(n(a,b,e,h),Number.MAX_SAFE_INTEGER):d("mwReplaceToast").mwReplaceToast(babelHelpers["extends"]({},n(a,b,e,h),{toastId:p.current}));else if(p.current!=null){var i=p.current;o(i,f);c("setTimeout")(function(){m.expire(i),p.current=void 0},2750)}},r=[g,b,a,e,h,f],i[0]=f,i[1]=b,i[2]=h,i[3]=e,i[4]=g,i[5]=a,i[6]=q,i[7]=r):(q=i[6],r=i[7]);k(q,r);i[8]===Symbol["for"]("react.memo_cache_sentinel")?(q=function(){return function(){p.current!=null&&m.expire(p.current)}},r=[],i[8]=q,i[9]=r):(q=i[8],r=i[9]);j(q,r)}g.useMAWLoadingSpinner=a}),98);
__d("MAWLoadingStateToastSelectors",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return a.offlineQueueCount};b=function(a){return a.offlineQueueProgressDownloaded};c=function(a){return a.offlineQueueProgressProcessed};f.offlineQueueCountSelector=a;f.offlineQueueProgressCountSelector=b;f.offlineQueueConsumerProgressCountSelector=c}),66);
__d("MAWLoadingStateSpinner.react",["fbt","CometDarkModeContext","MAWLoadingSpinner.react","MAWLoadingStateToastSelectors","MAWStateContext.react","react","react-compiler-runtime","useMAWOfflineQueueLoadingIndicator"],(function(a,b,c,d,e,f,g,h){"use strict";var i;i||(i=d("react"));b=i;e=b.memo;var j=b.useContext,k=function(a){return h._("__JHASH__LlHcIvsh5It__JHASH__",[h._param("restoredPercentage",a.toFixed(0).toString())])},l=h._("__JHASH__EPxp6BXcf-B__JHASH__");function m(a,b,c){if(c===0)return 100;a=50*(a/c);b=50*(b/c);return Math.min(100,b+a)}function a(){var a=d("react-compiler-runtime").c(5),b=j(c("CometDarkModeContext")).currentSetting==="ENABLED",e=c("useMAWOfflineQueueLoadingIndicator")(!0),f=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateToastSelectors").offlineQueueCountSelector),g=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateToastSelectors").offlineQueueProgressCountSelector),h=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateToastSelectors").offlineQueueConsumerProgressCountSelector),i,n;a[0]!==g||a[1]!==f||a[2]!==h?(i=m(g,h,f),n=k(i),a[0]=g,a[1]=f,a[2]=h,a[3]=i,a[4]=n):(i=a[3],n=a[4]);g=n;d("MAWLoadingSpinner.react").useMAWLoadingSpinner("progressRing",b,g,l,e,i);return null}f=e(a);g["default"]=f}),226);
__d("MAWMigrationStateToastSelector.react",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return a.isDbMigrating};f.isDbMigratingSelector=a}),66);
__d("MAWMigrationStateSpinner.react",["fbt","CometDarkModeContext","MAWLoadingSpinner.react","MAWMigrationStateToastSelector.react","MAWStateContext.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i;i||(i=d("react"));b=i;e=b.memo;var j=b.useContext,k=h._("__JHASH__BcL_Hf5UaRM__JHASH__"),l=h._("__JHASH__UJ0S4v9Hktq__JHASH__");function a(){var a=j(c("CometDarkModeContext")).currentSetting==="ENABLED",b=d("MAWStateContext.react").useMAWSelector(d("MAWMigrationStateToastSelector.react").isDbMigratingSelector);d("MAWLoadingSpinner.react").useMAWLoadingSpinner("spinner",a,k,l,b);return null}f=e(a);g["default"]=f}),226);
__d("MAWOccamadilloOnMutexChange",["I64","LSDefaultSyncGroups","LSIntEnum","LSSyncGroupsUtils","Promise","WALogger","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Resetting sync cursor and network request"]);k=function(){return a};return a}function l(a){var c=d("LSDefaultSyncGroups").e2eeMetadataSyncGroup;if(c!=null)return a.sync_groups.put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncGroup,{groupId:(j||(j=d("LSIntEnum"))).ofNumber(c.groupId)}));else return(h||(h=b("Promise"))).resolve()}function m(a){return a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:i.zero,lastSyncRequestTimestampMs:i.zero,networkTaskIdentifier:void 0,syncDatabaseId:(j||(j=d("LSIntEnum"))).ofNumber(95),taskQueueName:""})}function a(a){d("WALogger").LOG(k()),c("promiseDone")(a.runInTransaction(function(a){return(h||(h=b("Promise"))).all([l(a),m(a)])},"readwrite",void 0,void 0,f.id+":53"))}g.onOccamadilloMutexChange=a}),98);
__d("MAWReinit",["ExecutionEnvironment","MAWCurrentUser","MAWEBSwitch","QPLUserFlow","QuickPerformanceLogger","WAGetStorageQplAnnotations","asyncToGeneratorRuntime","gkx","qpl","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(25310984,"169");function a(a){var e=a!=null?{instanceKey:a}:void 0,f=!1,g=!1;function k(){if(g)return;g=!0;c("QPLUserFlow").start(j,babelHelpers["extends"]({cancelOnUnload:!0,onFlowTimeout:function(){f=!0},timeoutInMs:(h||(h=c("ExecutionEnvironment"))).canUseDOM?6e4:0},e));void d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){c("QPLUserFlow").addAnnotations(j,a)});t()}function l(a){if(!g||f)return;t();c("QPLUserFlow").addPoint(j,a,e)}function m(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{bool:(d={},d[a]=b,d)})}function n(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{string:(d={},d[a]=b,d)})}function o(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{string_array:(d={},d[a]=b,d)})}function p(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{"int":(d={},d[a]=b,d)})}function q(a){t(),f=!0,c("QPLUserFlow").addAnnotations(j,{string:{failReason:a}},e),c("QPLUserFlow").endFailure(j,"maw_init_fail",e),s=!1}function r(a){t(),f=!0,s=!1,c("QPLUserFlow").addAnnotations(j,{string:{dropReason:a}},e),(i||(i=c("QuickPerformanceLogger"))).markerDrop(j)}var s=!1;function t(){if(s)return;s=!0;c("QPLUserFlow").addAnnotations(j,{bool:{armadillo_init_sync_api_improvements:c("gkx")("24025"),is_eb_enabled:c("MAWEBSwitch").isEnabled(),isArmadilloPublicLaunchUser:c("gkx")("23405"),isTlcPublicUser:d("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()}})}function u(a){t(),f=!0,c("QPLUserFlow").addAnnotations(j,{string:{cancelReason:a}},e),c("QPLUserFlow").endCancel(j,e),s=!1}function v(){t(),f=!0,c("QPLUserFlow").endSuccess(j,e),s=!1}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a+"_start";a=a+"_end";l(c);c=(yield b());l(a);return c});return x.apply(this,arguments)}return{addBoolAnnotation:m,addIntAnnotation:p,addStringAnnotation:n,addStringArrayAnnotation:o,cancel:u,drop:r,endSuccess:v,fail:q,logPoint:l,measurePerformance:w,start:k}}g.getMAWReinit=a}),98);
__d("MAWReinitWorker",["MAWCommonBackendSetup","MAWOccamadilloOnMutexChange","MAWReinit","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.allTablesPersisted,c=a.db,e=a.dispatch,f=a.dispatchClearEphemeralSettings,g=a.instanceKey,h=a.logout,i=a.reregisterDevice,j=a.rotateCryptoAuthToken,k=a.setupBridge;a=a.workerCreateReason;g=d("MAWReinit").getMAWReinit(g);g.start();var l=function(){e({tag:"InitOfflineQueueSyncComplete",value:void 0}),e({tag:"IsDbMigrating",value:!1})};yield d("MAWCommonBackendSetup").setupArmadilloBackend(g,function(a){return k({dispatch:e,logout:h,reregisterDevice:i,rotateCryptoAuthToken:j,worker:a}).then(function(a){b||d("MAWOccamadilloOnMutexChange").onOccamadilloMutexChange(c);return a})},l,l,a);g.endSuccess();f()});return h.apply(this,arguments)}g["default"]=a}),98);
__d("MAWSetupBridgeIsDbMigrating",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return function(b){b=b.status;switch(b){case!0:a({tag:"IsDbMigrating",value:!0});return;case!1:a({tag:"IsDbMigrating",value:!1});return}}};b=a;f["default"]=b}),66);
__d("MAWSetupBridgeOfflineConsumer",["InteractionTracingMetrics","MAWBridgeInitOfflineQueueSyncCompleteHandler","MAWMIC","MAWOfflineQueueStatus","MAWSharedProtocolQueueConst","MWChatInteraction","WATagsLogger","asyncToGeneratorRuntime","cr:9793","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats failed: expected: ",", processed: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats end: expected: ",", processed: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats: expected: ",", processed: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",""]);k=function(){return a};return a}var l=d("WATagsLogger").TAGS(["ServerRPC","OfflineConsumer"]);function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a;if(b("cr:9793")!=null){a=c("gkx")("7697");b("cr:9793").prewarmMediaWasmWorker(a?"mp4RepairMux":"mp4CheckAndRepair")}return d("MAWBridgeInitOfflineQueueSyncCompleteHandler").call()});return n.apply(this,arguments)}function o(a){d("MAWMIC").addIntAnnotation("offlineQueueSize",a);var b=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);b!=null&&c("InteractionTracingMetrics").addAnnotationInt(b,"offlineQueueSize",a)}function p(a,b){var e=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);e!=null&&c("InteractionTracingMetrics").addSubspan(e,"offline_queue","LONGTASK",a,b,{})}function a(a,b){return function(e){var f=e.chatJidStatus,g=e.status,n=e.timestamp,q=e.totalExpectedCount,r=e.totalProcessedCount;switch(g){case d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing:l.LOG(k(),q);o(q);b({tag:"InitOfflineQueueSyncStart",value:q});d("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(f,d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing);d("MAWMIC").markEvent("worker_process_offline_queue_start",n);d("MAWOfflineQueueStatus").resetOfflineQueueState();return;case d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Processing:l.LOG(j(),q,r);b({tag:"InitOfflineQueueConsumerSyncProgress",value:{chatJidStatus:f,processed:r}});d("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(f,d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Processing);return;case d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete:l.LOG(i(),q,r);e.startTime!=null&&p(e.startTime,n);b({tag:"InitOfflineQueueSyncComplete",value:f});c("promiseDone")(m(a));d("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(f,d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete);d("MAWMIC").markEvent("worker_process_offline_queue_end",n);d("MAWOfflineQueueStatus").markOfflineQueueComplete();return;case d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed:l.LOG(h(),q,r);d("MAWMIC").markEvent("worker_process_offline_queue_failed",n);d("MAWMIC").markEvent("worker_process_offline_queue_end",n);b({tag:"InitOfflineQueueSyncComplete",value:void 0});c("promiseDone")(m(a));d("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(f,d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed);d("MAWOfflineQueueStatus").markOfflineQueueComplete();return}}}g["default"]=a}),98);
__d("MAWSetupBridgeOfflineSnapshot",["InteractionTracingMetrics","MAWMIC","MWChatInteraction","WAOfflineUtils","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["WA infra offline connection lost"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats end: "," / ",", messages: "," / ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Progress: "," / ",", messages: "," / ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",", messages: ",""]);k=function(){return a};return a}var l=d("WATagsLogger").TAGS(["ServerRPC","Offline"]);function m(a){d("MAWMIC").addIntAnnotation("offlineQueueSize",a);var b=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);b!=null&&c("InteractionTracingMetrics").addAnnotationInt(b,"offlineQueueSize",a)}a=function(a){return function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.downloaded,e=b.expected,f=b.status;b=b.timestamp;switch(f){case d("WAOfflineUtils").WAClientInfraOfflineProgress.Initializing:l.LOG(k(),e.count,e.message);m(e.count);a({tag:"InitOfflineQueueSyncStart",value:e.count});d("MAWMIC").markEvent("worker_download_offline_queue_start",b);return;case d("WAOfflineUtils").WAClientInfraOfflineProgress.Processing:l.LOG(j(),c.count,e.count,c.message,e.message);a({tag:"InitOfflineQueueSyncProgress",value:c.count});return;case d("WAOfflineUtils").WAClientInfraOfflineProgress.Complete:l.LOG(i(),c.count,e.count,c.message,e.message);d("MAWMIC").addIntAnnotation("offlineQueueDownloadedCount",c.count);a({tag:"InitOfflineQueueSyncProgress",value:e.count});d("MAWMIC").markEvent("worker_download_offline_queue_end",b);return;case d("WAOfflineUtils").WAClientInfraOfflineProgress.Failed:l.LOG(h());d("MAWMIC").markEvent("worker_download_offline_queue_connection_lost",b);return}});return function(a){return c.apply(this,arguments)}}()};e=a;g["default"]=e}),98);
__d("MAWSetupUpdateMediaStatus",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return function(b){var c=b.details,d=b.key,e=b.status,f=b.type;b=b.validationResult;a({tag:"UpdateMediaStatus",value:{details:c,key:d,status:e,type:f,validationResult:b}});return}};b=a;f["default"]=b}),66);
__d("MWWorkerOwnedDbKeychain",["Deferred","MAWCryptoConsts","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleEARKeyChange"]);h=function(){return a};return a}c={accountKey:null,databaseEncryptionKeys:new Map(),dbReady:new(c("Deferred"))(),latestVersion:d("MAWCryptoConsts").VERSION};var i=babelHelpers["extends"]({},c),j="uninitialized",k=d("WATagsLogger").TAGS(["MWWorkerOwnedDbKeychain"]);function a(){return i}function b(a){k.LOG(h()),j="initialized",i=a}function e(){return j==="initialized"}function f(){return i.latestVersion}g.getEARKey=a;g.handleEARKeyChange=b;g.isInitialised=e;g.getLatestVersion=f}),98);
__d("MAWSetupBridge",["DTSG","LSDatabaseSingleton","LSInitSyncCompleteSubscription","LSPlatformGraphQLLightspeedRequest","MAWAbPropsClient","MAWBridgeReceivedChatStateHandler","MAWCommonSetupBridge","MAWFetchContacts","MAWGetEphemeralSettings","MAWSetupBridgeIsDbMigrating","MAWSetupBridgeOfflineConsumer","MAWSetupBridgeOfflineSnapshot","MAWSetupUpdateMediaStatus","MAWUnrecoverableDbErrors","MWWorkerOwnedDbKeychain","Promise","Run","Visibility","WAExceededStorageQuota","asyncToGeneratorRuntime","cr:3411","cr:858","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("ArmadilloCutoverClientFalcoEvent").__setRef("MAWSetupBridge"),k=c("requireDeferred")("MAWBridgeUpdateDYIStatusV2").__setRef("MAWSetupBridge"),l=c("requireDeferred")("MAWBridgeUploadMessageByBatchGQLHandler").__setRef("MAWSetupBridge"),m=(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(d("LSInitSyncCompleteSubscription").use).then(function(){return(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton}),n=function(a){j.loadImmediately(function(b){b=b.log;return b(function(){return{armadillo_thread_id:a.armadilloThreadId,domain:a.domain,event:a.event,event_details:a.eventDetails,open_thread_id:a.openThreadId,success:a.success,trace_id:a.traceId}})})};function a(a){var e=a.dispatch,f=a.logout,g=a.reregisterDevice,i=a.rotateCryptoAuthToken,j=a.worker;function o(){j.postMessage({type:"force-flush-data"})}d("Run").onUnload(o);d("Run").onBeforeUnload(o,!1);c("Visibility").addListener(c("Visibility").HIDDEN,function(){j.postMessage({type:"force-flush-logs-only"})});return d("MAWCommonSetupBridge").initBridge({customizeEventHandlers:{abPropsUpdated:function(a){d("MAWAbPropsClient").rewrite(a.abProps)},earKeyChange:function(a){d("MWWorkerOwnedDbKeychain").handleEARKeyChange(a)},executeGraphQLLightSpeedRequest:function(a){a=a.args;return c("LSPlatformGraphQLLightspeedRequest").apply(void 0,a)},getDTSGToken:function(){return(h||(h=b("Promise"))).resolve(d("DTSG").getToken())},getLSDBEphemeralSetting:function(a){return d("MAWGetEphemeralSettings").getEphemeralSetting(a.chatJid)},getLSDBUsersIsMsplit:function(a){return d("MAWFetchContacts").fetchContactsIsMsplit(a.users)},getLSDBUsersRelationships:function(a){return d("MAWFetchContacts").fetchContactsRelationships(a.users)},isDbMigrating:c("MAWSetupBridgeIsDbMigrating")(e),logCutoverEvent:n,logout:f,offlineConsumerProgress:function(){return c("MAWSetupBridgeOfflineConsumer")(m,e).apply(void 0,arguments)},offlineSnapshot:c("MAWSetupBridgeOfflineSnapshot")(e),receivedChatState:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield m);yield b.runInTransaction(function(b){return d("MAWBridgeReceivedChatStateHandler").call(b,a)},"readwrite")});function c(b){return a.apply(this,arguments)}return c}(),reregisterDevice:g,resignCdnUrl:function(){return(h||(h=b("Promise"))).resolve()},rotateCryptoAuthToken:i,storageQuota:function(a){a=a.exceededStorageQuota;d("WAExceededStorageQuota").setExceededStorageQuota(a)},uiUpdate:function(a){a=a.events;e&&a.forEach(function(a){return e(a)});b("cr:3411")==null?void 0:b("cr:3411").recordBridgeUIEvent(a);b("cr:858").handleEvents(m,a)},unrecoverableDbError:function(a){a=a.error;d("MAWUnrecoverableDbErrors").setError(a)},updateDYIStatus:function(a){var b=a.qplEvent,d=a.qplInstanceKeyE2E,e=a.status;c("promiseDone")(k.load().then(function(a){return a.call({qplEvent:b,qplInstanceKeyE2E:d,status:e})}))},updateMediaStatus:c("MAWSetupUpdateMediaStatus")(e),uploadMessagesToBackup:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield m);c("promiseDone")(l.load().then(function(c){return c.call(b,a)}))});function d(b){return a.apply(this,arguments)}return d}(),uploadOpenMessages:function(){return(h||(h=b("Promise"))).reject("this bridge should not be used for msgr")}},worker:j})}g.setupBridge=a}),98);
__d("MAWSetupMutex",["FBLogger","LocalStorageMutex","MAWAppMutex","MAWBridge","MAWInit","MAWIssueNewUserVisibleErrors","MAWLocalStorage","MAWMIC","MAWReinitWorker","MAWSetupWorker","MAWStateContext.react","MAWWaitForBackendSetup","MAWWebWorkerSingleton","QPLUserFlow","Run","WALoggerDeferred","asyncToGeneratorRuntime","isInstamadillo","promiseDone","qpl","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["AppMutex - Shouldn't reinitialize, worker already exists"]);j=function(){return a};return a}e=i||d("react");var k=e.useCallback,l=e.useEffect,m=e.useMemo,n=c("FBLogger")("messenger_e2ee_web"),o=!1,p=0;function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(document.visibilityState!=="visible")return!1;var b=window.indexedDB!=null,c=d("MAWLocalStorage").isLocalStorageAvailable();if(a){void d("WALoggerDeferred").DEV(j());return!1}return!b||!c?!1:!0});return r.apply(this,arguments)}function a(a,e){var f=a.logout,g=a.reregisterDevice,i=a.rotateCryptoAuthToken,j=a.setupBridge,r=m(function(){return d("MAWAppMutex").use()},[]),s=(h||(h=c("useReStore")))(),t=d("MAWStateContext.react").useDispatchClearEphemeralSettings(),u=s.persistenceTypes.includes("indexeddb"),v=k(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=r.takeoverFilter(a);if(!b||a.newValue===d("LocalStorageMutex").THIS_TAB||a.newValue==="")return;!u&&!c("isInstamadillo")()&&d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"DropAllSecureThreads",value:void 0}]});yield d("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleStoreChange");d("MAWWaitForBackendSetup").resetBackendSetup();d("MAWMIC").cancel("workerMutexLost");d("MAWInit").MAWInit.cancel("workerMutexLost");r.onMutexDeath()});return function(b){return a.apply(this,arguments)}}(),[r,u]),w=k(function(){r.onMutexDeath(),c("promiseDone")(d("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleUnload"))},[r]),x=k(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("MAWWebWorkerSingleton").doesWorkerExist());a=(yield q(a));if(!a||o)return;o=!0;p++;try{yield c("MAWReinitWorker")({allTablesPersisted:u,db:s,dispatch:e,dispatchClearEphemeralSettings:t,instanceKey:p,logout:f,reregisterDevice:g,rotateCryptoAuthToken:i,setupBridge:j,workerCreateReason:"mawReinitSetupMutex"}),d("MAWIssueNewUserVisibleErrors").deleteUserVisibleErrorByJSErrorMessage("maw_appmutex_no_permission")}catch(a){n.mustfix("AppMutex - failed to reinitialize worker: "+a.message.concat(" (",a.error,")")),n.catching(a),c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"failed_to_reinitialize_worker",{annotations:{string:{error:a.message.concat(": ",a.error)}},error:a,instanceKey:p})}finally{o=!1}}),[u,s,e,t,f,g,i,j]);l(function(){window.addEventListener("storage",v);var a=d("Run").onBeforeUnload(w,!1),b=d("Run").onUnload(w);window.addEventListener("visibilitychange",x);return function(){window.removeEventListener("storage",v),a.remove(),b.remove(),window.removeEventListener("visibilitychange",x)}},[v,w,x])}g.useMutex=a}),98);
__d("MAWSetupMutex.react",["MAWSetupMutex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.dispatch;a=a.platformSetupUtils;d("MAWSetupMutex").useMutex(a,b);return null}g["default"]=a}),98);
__d("MWChatFetchThreadMessageCounts",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";function a(a){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return{}});return g.apply(this,arguments)}function c(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return 0});return h.apply(this,arguments)}f.fetchArmadilloThreadMessageCounts=a;f.fetchArmadilloThreadMessageCount=c}),66);
__d("globalCryptoSubtle",[],(function(a,b,c,d,e,f){"use strict";b=a.crypto.subtle;c=b;f["default"]=c}),66);
__d("useDataLossStatisticsStorageListener",["LSDatabaseSingleton","MWChatFetchThreadMessageCounts","Visibility","WebStorage","promiseDone","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||d("react")).useEffect,l="armadillo_msgr_data_loss_stats";function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[],a[0]=b):b=a[0];k(m,b)}function m(){var a;window.setTimeout(function(){a=c("Visibility").addListener(c("Visibility").HIDDEN,n)},3e4);return function(){var b;(b=a)==null?void 0:b.remove()}}function n(){c("promiseDone")((j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(o))}function o(a){return d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(a).then(p)}function p(a){(h||(h=c("WebStorage"))).setItemGuarded(h.getLocalStorage(),l,JSON.stringify(a))}g.DATA_LOSS_STATISTICS_STORAGE_KEY=l;g.useDataLossStatisticsStorageListener=a}),98);
__d("MWChatDataLossCheckerUtil",["FBLogger","I64","MWChatFetchThreadMessageCounts","Promise","QuickPerformanceLogger","WebStorage","asyncToGeneratorRuntime","gkx","globalCryptoSubtle","promiseDone","qpl","useDataLossStatisticsStorageListener"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){a=Array.from(new Uint8Array(a));return a.map(function(a){return a.toString(16).padStart(2,"0")}).join("")}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(c("gkx")("24059"))return a;var b=new TextEncoder();b=b.encode(a).buffer;a=(yield c("globalCryptoSubtle").digest("SHA-256",b));return l(a)}catch(a){return a}});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.currentIDBCnt,d=a.currentMsgCnt,e=a.logThreadId,f=a.prevMsgCnt,g=a.qplEvent;a=a.threadId;if(e!=null&&e){e=(yield m(a));b!=null?((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_idb_count:b,current_msg_count:d,prev_msg_count:f},string:{encrypted_threadId:e}}),j.markerEnd(g,2)):((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_msg_count:d,prev_msg_count:f},string:{encrypted_threadId:e}}),j.markerEnd(g,2))}else b!=null?((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_idb_count:b,current_msg_count:d,prev_msg_count:f}}),j.markerEnd(g,2)):((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_msg_count:d,prev_msg_count:f}}),j.markerEnd(g,2))});return p.apply(this,arguments)}function q(a){var b=a.currentMsgCnt,c=a.logThreadId,d=a.prevMsgCnt,e=a.qplEvent;a=a.threadId;return o({currentMsgCnt:b,logThreadId:c,prevMsgCnt:d,qplEvent:e,threadId:a})}function a(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{a=(yield d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCount(a,b));var e=(k||(k=c("WebStorage"))).getAllowlistedKeyFromLocalStorage(d("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(e==null)return{isThreadMissingMessages:!1};e=JSON.parse(e);b=(e=e[(i||(i=d("I64"))).to_string(b)])!=null?e:null;if(b==null)return{isThreadMissingMessages:!1};return b>0&&a===0?{currCount:a,isThreadMissingMessages:!0,prevCount:b}:{isThreadMissingMessages:!1}}catch(a){c("FBLogger")("labyrinth").catching(a).warn("Failed to check for data loss");return{isThreadMissingMessages:!1}}});return r.apply(this,arguments)}function e(a){a=d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(a);a.then(function(a){var e=(k||(k=c("WebStorage"))).getAllowlistedKeyFromLocalStorage(d("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(e==null)return(h||(h=b("Promise"))).resolve(null);e=JSON.parse(e);return(h||(h=b("Promise"))).resolve({current:a,previous:e})}).then(function(a){if(a==null)return(h||(h=b("Promise"))).resolve();var c=a.current;a=a.previous;return s(a,c)})["catch"](function(a){return c("FBLogger")("labyrinth").catching(a).warn("Failed to check for data loss")});return a.then(function(){})}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d){var e=[];for(var f in a)Object.prototype.hasOwnProperty.call(d,f)&&e.push(f);f=[];for(var g=0;g<e.length;g++){var i=e[g],j={currentMsgCnt:d[i],prevMsgCnt:a[i],threadId:i};a[i]>0&&d[i]===0?(f.push(q(babelHelpers["extends"]({},j,{qplEvent:c("qpl")._(717553665,"1183")}))),f.push(q(babelHelpers["extends"]({},j,{logThreadId:!0,qplEvent:c("qpl")._(717562243,"1358")})))):(f.push(q(babelHelpers["extends"]({},j,{qplEvent:c("qpl")._(717553666,"1184")}))),f.push(q(babelHelpers["extends"]({},j,{logThreadId:!0,qplEvent:c("qpl")._(717556541,"1361")}))))}yield (h||(h=b("Promise"))).all(f)});return t.apply(this,arguments)}function f(a){var b=function(b){c("promiseDone")(m(b).then(function(d){(j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(c("qpl")._(717567419,"1383")),j.markerAnnotate(c("qpl")._(717567419,"1383"),{string:{encryptedThreadId:d,msg_count:a[b].toString()}}),j.markerEnd(c("qpl")._(717567419,"1383"),2)}))};for(var d in a)b(d)}g.qplLog=q;g.checkIsThreadMissingMessages=a;g.fetchCountsAndLogDataLoss=e;g.logThreadCompleteDataLoss=s;g.logLocalStatistics=f}),98);
__d("useOnMawSetupComplete.react",["emptyFunction","promiseDone","react","waitForMAWMIC"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a,b,e){b===void 0&&(b=c("emptyFunction")),i(function(){var e=!1;c("promiseDone")(d("waitForMAWMIC").promise.then(function(){if(e)return;a()})["catch"](function(){if(e)return;b()}));return function(){e=!0}},e)}g.useOnMawSetupComplete=a}),98);
__d("useDataLossChecker",["FBLogger","I64","LSDatabaseSingleton","LSFactory","LSScheduleOccamThreadsIntegrityCheckerStoredProcedure","MWChatDataLossCheckerUtil","asyncToGeneratorRuntime","gkx","justknobx","promiseDone","react-compiler-runtime","useDataLossStatisticsStorageListener","useOnMawSetupComplete.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){var a=d("react-compiler-runtime").c(2);d("useDataLossStatisticsStorageListener").useDataLossStatisticsStorageListener();var b,c;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=m(),c=[],a[0]=b,a[1]=c):(b=a[0],c=a[1]);d("useOnMawSetupComplete.react").useOnMawSetupComplete(j,b,c)}function j(){c("promiseDone")(k()),m()}function k(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);yield d("MWChatDataLossCheckerUtil").fetchCountsAndLogDataLoss(a)});return l.apply(this,arguments)}function m(){try{var a=c("gkx")("24061"),e=c("justknobx")._("1683");a&&e&&c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return a.runInTransaction(function(a){return c("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure")(c("LSFactory")(a),{delayMs:(i||(i=d("I64"))).of_int32(6e4),maxThreadCount:i.of_int32(20)})},"readonly",void 0,void 0,f.id+":61")})())}catch(a){c("FBLogger")("labyrinth_web").warn("Error running thread integrity checker",a)}}g["default"]=a}),98);
__d("useLegacyUserWatchdog",["MAWIssueNewUserVisibleErrors","clearTimeout","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;b=24*60*60*1e3;var j=5*b;function a(){i(k)}function k(){var a=c("setTimeout")(l,j);return function(){return c("clearTimeout")(a)}}function l(){var a;(a=d("MAWIssueNewUserVisibleErrors")).issueError(a.MAWLegacyUserErrorMsgBody,a.MAWLegacyUserErrorMsgTitle,a.MAWUserVisibleErrorPresentationType.BANNER)}g["default"]=a}),98);
__d("useMAWReregisterDeviceOnError",["LSPersistedDbGating","MAWIssueNewUserVisibleErrors","MAWLoggerUtils","MAWReinitWorker","MAWSetupWorker","MAWStateContext.react","MAWWaitForBackendSetup","ODS","WABridgedAPI","WATagsLogger","asyncToGeneratorRuntime","promiseDone","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to reinit worker ",""]);j=function(){return a};return a}e=h||d("react");var k=e.useCallback,l=e.useContext,m=!1,n=typeof window!=="undefined"?window:self;function o(){m=!0,c("promiseDone")(d("MAWSetupWorker").terminateWorkerPermanently(),function(){(i||(i=d("ODS"))).bumpEntityKey(3185,"armadillo_forced_reregister_fail",n.location.hostname),d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)})}function a(a){var e=a.rotateCryptoAuthToken,f=a.setupBridge,g=c("useAsyncReStore")(),h=d("MAWStateContext.react").useDispatchClearEphemeralSettings(),p=l(d("MAWStateContext.react").MAWDispatchContext);return k(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(m)return;(i||(i=d("ODS"))).bumpEntityKey(3185,"armadillo_forced_deregister",n.location.hostname);yield c("WABridgedAPI").removeCurrentDevice();yield d("MAWSetupWorker").terminateWorker("useMAWReregisterDeviceOnError");d("MAWWaitForBackendSetup").resetBackendSetup();try{var a=(yield g);yield c("MAWReinitWorker")({allTablesPersisted:d("LSPersistedDbGating").allTablesPersisted,db:a,dispatch:p,dispatchClearEphemeralSettings:h,logout:o,reregisterDevice:o,rotateCryptoAuthToken:e,setupBridge:f,workerCreateReason:"mawReinitReregDevice"})}catch(b){d("MAWWaitForBackendSetup").rejectBackendSetup(b);a=b.description||b.message||b;d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.DeviceRegistration,d("MAWLoggerUtils").Tag.LogoutHandler,d("MAWLoggerUtils").Tag.WorkerSetup,d("MAWLoggerUtils").Tag.MAWWorker,d("MAWLoggerUtils").Tag.MAWInit]).ERROR(j(),a);d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)}}),[g,p,h,e,f])}g["default"]=a}),98);
__d("useStorageUsageMetricsLogger",["cr:3504","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[],a[0]=b):b=a[0];i(j,b)}function j(){b("cr:3504")==null?void 0:b("cr:3504").logMAWDBUsageMetrics()}g["default"]=a}),98);
__d("MAWSetupImpl.react",["BaseHeadingContext","CometRelay","MAWCommonSetup","MAWCryptoAuthToken","MAWSetupMutex.react","MAWStateContext.react","cr:6159","cr:6160","cr:8800","promiseDone","react","react-compiler-runtime","shouldUseMAWSharedWorker","useDataLossChecker","useLegacyUserWatchdog","useMAWReregisterDeviceOnError","useStorageUsageMetricsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;e.useCallback;var j=e.useContext;e.useMemo;window.XPlatTesting=b("cr:6159");window.XPlatTestingGroups=b("cr:6160");window.XPlatMockServer=b("cr:8800");function a(a){var b=d("react-compiler-runtime").c(24),e=a.children,f=a.fbid,g=a.logout;a=a.setupBridge;var h=j(d("MAWStateContext.react").MAWDispatchContext),k=d("CometRelay").useRelayEnvironment(),l;b[0]!==k?(l=function(){return d("MAWCryptoAuthToken").fetchFreshCAT(k)},b[0]=k,b[1]=l):l=b[1];l=l;var m;b[2]!==l||b[3]!==a?(m={rotateCryptoAuthToken:l,setupBridge:a},b[2]=l,b[3]=a,b[4]=m):m=b[4];var n=c("useMAWReregisterDeviceOnError")(m);b[5]!==g||b[6]!==n?(m=g!=null?g:function(){return c("promiseDone")(n())},b[5]=g,b[6]=n,b[7]=m):m=b[7];b[8]!==n?(g=function(){return c("promiseDone")(n())},b[8]=n,b[9]=g):g=b[9];var o;b[10]!==l||b[11]!==a||b[12]!==m||b[13]!==g?(o={logout:m,reregisterDevice:g,rotateCryptoAuthToken:l,setupBridge:a},b[10]=l,b[11]=a,b[12]=m,b[13]=g,b[14]=o):o=b[14];l=o;a=l;d("MAWCommonSetup").useArmadillo(a);c("useLegacyUserWatchdog")();c("useDataLossChecker")();c("useStorageUsageMetricsLogger")();m=j(c("BaseHeadingContext"));g=!d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();o=m+1;b[15]!==h||b[16]!==k||b[17]!==f||b[18]!==a?(l=g?i.jsx(c("MAWSetupMutex.react"),{dispatch:h,environment:k,fbId:f,platformSetupUtils:a}):null,b[15]=h,b[16]=k,b[17]=f,b[18]=a,b[19]=l):l=b[19];b[20]!==e||b[21]!==o||b[22]!==l?(m=i.jsxs(c("BaseHeadingContext").Provider,{value:o,children:[e,l]}),b[20]=e,b[21]=o,b[22]=l,b[23]=m):m=b[23];return m}g["default"]=a}),98);
__d("MAWSetup.react",["CometPlaceholder.react","CometRelay","CurrentUser","MAWOembedIframeContainer.react","MAWSetupBridge","MAWSetupImpl.react","cr:3487","cr:6809","cr:8510","deferredLoadComponent","isGroupInvitesEnabled","promiseDone","react","react-compiler-runtime","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect,k=b("cr:6809")!=null?b("cr:6809").CometLogoutProvider:function(a){a=a.children;return i.jsx(i.Fragment,{children:a})},l=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MAWLoadingStateSpinner.react").__setRef("MAWSetup.react")),m=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MAWMigrationStateSpinner.react").__setRef("MAWSetup.react"));c("isGroupInvitesEnabled")();function a(a){var e=d("react-compiler-runtime").c(12);a=a.children;var f;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=[],e[0]=f):f=e[0];j(n,f);var g=d("CometRelay").useRelayEnvironment(),h;e[1]!==g?(f=function(){b("cr:8510")&&c("promiseDone")(b("cr:8510").initOhaiWebClient(g))},h=[g],e[1]=g,e[2]=f,e[3]=h):(f=e[2],h=e[3]);j(f,h);e[4]===Symbol["for"]("react.memo_cache_sentinel")?(f=c("CurrentUser").getID(),e[4]=f):f=e[4];e[5]!==a?(h=i.jsx(c("MAWSetupImpl.react"),{fbid:f,logout:void 0,setupBridge:d("MAWSetupBridge").setupBridge,children:a}),e[5]=a,e[6]=h):h=e[6];e[7]===Symbol["for"]("react.memo_cache_sentinel")?(f=i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MAWSetup.MigrationState",children:i.jsx(m,{})}),e[7]=f):f=e[7];var o;e[8]===Symbol["for"]("react.memo_cache_sentinel")?(a=i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MAWSetup.LoadingState",children:i.jsx(l,{})}),o=b("cr:3487")&&i.jsx(b("cr:3487"),{}),e[8]=a,e[9]=o):(a=e[8],o=e[9]);e[10]!==h?(f=i.jsxs(k,{children:[h,f,a,o]}),e[10]=h,e[11]=f):f=e[11];return f}function n(){var a=d("MAWOembedIframeContainer.react").createMAWOembedIframeContainer();return function(){a==null?void 0:a.stopListening()}}g["default"]=a}),98);
__d("QPLE2ESessionMarkers",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NONE:"none",START:"start",END:"end"});c=a;f["default"]=c}),66);
__d("QPLE2E",["QuickPerformanceLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){}var b=a.prototype;b.logPointDeprecated=function(a,b,d,e){var f,g;e===void 0&&(e={});f=(f=e.timestamp)!=null?f:(h||(h=c("QuickPerformanceLogger"))).currentTimestamp();var i=babelHelpers["extends"]({},e.pointData);g=(g=e.action)!=null?g:12524;e.secondaryOrder!=void 0&&(i.string||(i.string={}),i.string.qpl_e2e__secondary_order=e.secondaryOrder);if(e.sessionMarker&&e.sessionMarker!=="none"){var j;i.bool||(i.bool={});i.bool=babelHelpers["extends"]({},i.bool,(j={},j.qpl_e2e__session_marker_start_point=e.sessionMarker==="start",j.qpl_e2e__session_marker_end_point=e.sessionMarker==="end",j))}(h||(h=c("QuickPerformanceLogger"))).markerStart(a,void 0,f,{samplingBasis:d});h.markerPoint(a,b,{data:i,timestamp:f*2});e.annotations&&(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(a,e.annotations);h.markerAnnotate(a,{string:(j={},j.join_id=d,j.qpl__source="client",j),bool:(b={},b.qpl_e2e__align_points=!0,b)});h.markerEnd(a,g,void 0,f)};return a}();b=new a();g["default"]=b}),98);
__d("MWCMChatTabNotificationsQPLLoggingUtils",["QPLE2E","QPLUserFlow","Random","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(25298296,"1725"),i=c("qpl")._(25304846,"1726");function a(){var a=d("Random").uint32();return{logCancel:function(b){c("QPLUserFlow").endCancel(i,{annotations:{string:{cancelReason:b}},instanceKey:a})},logEventStreamReceived:function(b){b!=null&&c("QPLE2E").logPointDeprecated(h,"client:receive_event_stream",b,{action:2}),c("QPLUserFlow").start(i,{instanceKey:a})},logOpenChatTab:function(){c("QPLUserFlow").addPoint(i,"open_chat_tab",{instanceKey:a})},logOpenChatTabSuccess:function(){c("QPLUserFlow").endSuccess(i,{instanceKey:a})},logThreadLoaded:function(){c("QPLUserFlow").addPoint(i,"thread_loaded",{instanceKey:a})}}}g.createChatTabQPLLogger=a}),98);
__d("MWChatBadgeCountQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"suppress_xac_groups"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"suppress_xac_groups",variableName:"suppress_xac_groups"}],kind:"ScalarField",name:"unseen_count",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_loading_client_threads",storageKey:null}]}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatBadgeCountQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatBadgeCountQuery",selections:b},params:{id:"5218522061549416",metadata:{},name:"MWChatBadgeCountQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWChatBadgeCountQuery",["MWChatBadgeCountQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("MWChatBadgeCountQuery.graphql");g["default"]=a}),98);
__d("MWChatBadgeCount.react",["fbt","CometPlaceholder.react","CometRelay","CometVisualCompletionAttributes","FDSNumberedBadge.react","MWChatBadgeCountQuery","MWChatBadgeCountUpdates.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useRef;function m(a){var b=d("react-compiler-runtime").c(9),e=a.overflow,f=a.setBadgeCount;a=d("CometRelay").useLazyLoadQuery(c("MWChatBadgeCountQuery"),{suppress_xac_groups:!1},{fetchPolicy:"store-or-network"});a=(a=a.viewer)==null?void 0:a.message_threads;var g=a!=null&&a.unseen_count!=null&&a.unseen_count>0?Math.min(d("MWChatBadgeCountUpdates.react").minSyncedThreads,a.unseen_count):0,i=l(null),m;b[0]!==g||b[1]!==f?(a=function(){f&&i.current!==g&&(i.current=g,f(g))},m=[g,f],b[0]=g,b[1]=f,b[2]=a,b[3]=m):(a=b[2],m=b[3]);k(a,m);b[4]!==g||b[5]!==e?(a=g>0?j.jsx(c("FDSNumberedBadge.react"),{accessibilityText:h._("__JHASH__XxoiYlTWwN7__JHASH__",[h._param("count",g)]),overflow:e,testid:void 0,value:g}):null,b[4]=g,b[5]=e,b[6]=a):a=b[6];b[7]!==a?(m=j.jsx(j.Fragment,{children:a}),b[7]=a,b[8]=m):m=b[8];return m}function a(a){var b=d("react-compiler-runtime").c(4),e=a.overflow;a=a.setBadgeCount;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx("span",{}),b[0]=f):f=b[0];b[1]!==e||b[2]!==a?(f=j.jsx("div",babelHelpers["extends"]({},c("CometVisualCompletionAttributes").IGNORE_DYNAMIC,{children:j.jsx(c("CometPlaceholder.react"),{fallback:f,name:"MWChatBadgeCount",children:j.jsx(m,{overflow:e,setBadgeCount:a})})})),b[1]=e,b[2]=a,b[3]=f):f=b[3];return f}g["default"]=a}),226);
__d("MWChatBadgeCountUpdater.react",["CometRelay","LSIntEnum","MWChatBadgeCountUpdates.react","react","react-compiler-runtime","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect;function a(){var a=d("react-compiler-runtime").c(5),b=d("CometRelay").useRelayEnvironment(),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=(i||(i=d("LSIntEnum"))).ofNumber(0),a[0]=e):e=a[0];var f=d("MWChatBadgeCountUpdates.react").useUnseenThreadCount(e),g;a[1]!==f||a[2]!==b?(e=function(){var a={suppress_xac_groups:!1};b.commitUpdate(function(b){b=b.getRoot();if(b==null){c("recoverableViolation")("A store root must be present to move forward.","messenger_web_entrypoints");return}b=b.getOrCreateLinkedRecord("viewer","Viewer");b=b.getOrCreateLinkedRecord("message_threads","ViewerMessageThreadsConnection");if(f!=null){var d=b.getValue("unseen_count",a);(d===null||d!==f)&&b.setValue(f,"unseen_count",a)}})},g=[b,f],a[1]=f,a[2]=b,a[3]=e,a[4]=g):(e=a[3],g=a[4]);j(e,g);return null}g["default"]=a}),98);
__d("MWChatBadgeUpdaterImpl.react",["CometErrorBoundary.react","ExecutionEnvironment","FBLogger","cr:4562","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function k(a){var b=c("FBLogger")("messenger_web_entrypoints");a!=null&&(b=b.catching(a));b.debug("Error loading MWChatBadgeCountUpdater")}function a(){var a=d("react-compiler-runtime").c(1),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=(h||(h=c("ExecutionEnvironment"))).canUseDOM?j.jsx(c("CometErrorBoundary.react"),{onError:k,children:b("cr:4562")&&j.jsx(b("cr:4562"),{})}):null,a[0]=e):e=a[0];return e}g["default"]=a}),98);
__d("MWChatConfig",["CurrentEnvironment","bx"],(function(a,b,c,d,e,f,g){"use strict";a=c("CurrentEnvironment").messengerdotcom?c("bx").getURL(c("bx")("273041")):c("bx").getURL(c("bx")("273022"));b=c("CurrentEnvironment").messengerdotcom?c("bx").getURL(c("bx")("273042")):c("bx").getURL(c("bx")("273023"));g.soundNotifMp3Url=a;g.soundNotifOggUrl=b}),98);
__d("MWChatHeadError.react",["fbt","ix","CometHeroFailTrigger.react","CometHeroInteractionWithDiv.react","MWChatInteraction","MWXIcon.react","MWXPressable.react","MWXTooltip.react","fbicon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={compose:{alignItems:"x6s0dn4",backgroundColor:"xcrg951",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",$$css:!0},dropShadow:{boxShadow:"x1qeybcx",":hover_boxShadow":"x19xcq9t",$$css:!0}},m=h._("__JHASH__1kKkUA_eanI__JHASH__");function a(a){var b=d("react-compiler-runtime").c(7),e=a.contextRef;a=a.onPress;var f,g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=d("MWChatInteraction").get(d("MWChatInteraction").MW_CHATHEADS_LOAD),g=k.jsx(c("CometHeroFailTrigger.react"),{description:"Error while loading chatheads",fail:!0}),b[0]=f,b[1]=g):(f=b[0],g=b[1]);var h=a==null,j;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(j=k.jsx(c("MWXIcon.react"),{icon:d("fbicon")._(i("502063"),24)}),b[2]=j):j=b[2];b[3]!==e||b[4]!==a||b[5]!==h?(f=k.jsxs(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"Comet initial load to chatheads VC",interactionUUID:f,children:[g,k.jsx(c("MWXTooltip.react"),{align:"end",position:"above",tooltip:m,children:k.jsx(c("MWXPressable.react"),{"aria-label":m,disabled:h,display:"inline",onPress:a,ref:e,xstyle:n,children:j})})]}),b[3]=e,b[4]=a,b[5]=h,b[6]=f):f=b[6];return f}function n(a){return[l.compose,l.dropShadow]}g["default"]=a}),226);
__d("MWChatDisabled.react",["MWChatHeadError.react","react","react-compiler-runtime","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(4),e=a.contextRef;a=a.onPress;var f=c("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),g;b[0]!==e||b[1]!==a||b[2]!==f?(g=f?i.jsx("div",{className:"x1ey2m1c xds687c xixxii4",children:i.jsx("div",{className:"x191j7n5 x92rtbv x10l6tqk",children:i.jsx(c("MWChatHeadError.react"),{contextRef:e,onPress:a})})}):null,b[0]=e,b[1]=a,b[2]=f,b[3]=g):g=b[3];return g}g["default"]=a}),98);
__d("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react",["CometErrorBoundary.react","CometPlaceholder.react","HeroInteractionIgnoreWithDiv.react","deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferred")("MWChatEncryptedBackupsHandleRestoreWrapper.react").__setRef("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react"));function a(a){return i.jsx(c("HeroInteractionIgnoreWithDiv.react"),{children:i.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"EncryptedBackupsHandleRestoreWrapper",children:i.jsx(j,babelHelpers["extends"]({},a))})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatStateV2IsComposeTab",["MWChatStateV2Types"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.tabType;return a.type===d("MWChatStateV2Types").MWChatStateTabType.ComposeTab}g.isComposeTab=a}),98);
__d("MWChatStateV2HeadGroups",["MWChatStateV2CompareTabs","MWChatStateV2IsComposeTab","MWChatStateV2IsMinimized"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){c=Array.from(c.values()).filter(function(b){return d("MWChatStateV2IsMinimized").isMinimized(a,b)}).sort(function(a,b){var c=d("MWChatStateV2CompareTabs").byMostRecentMinimized(a,b);return c===0?d("MWChatStateV2CompareTabs").byMostRecentOpened(a,b):c});b=b.filter(function(a){return!d("MWChatStateV2IsComposeTab").isComposeTab(a)}).concat(c);return[b.slice(0,e),b.slice(e,b.length)]}g.getHeadGroups=a}),98);
__d("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9925683137457453"}),null);
__d("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql",["MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerChatTabsNotificationSubscribeResponsePayload",kind:"LinkedField",name:"messenger_chat_tabs_notification_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_timestamp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"qpl_join_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",selections:c,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",selections:c},params:{id:b("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation"),metadata:{subscriptionName:"messenger_chat_tabs_notification_subscribe"},name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("MWChatTabsNotificationSubscription",["CometRelay","MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql");function a(a,b){return d("CometRelay").requestSubscription(a,{onNext:b,subscription:i,variables:{input:{}}})}g.subscribe=a}),98);
__d("MWChatThreadPingCounter",[],(function(a,b,c,d,e,f){"use strict";var g=new Map();function h(a){a=g.get(a);return(a=a)!=null?a:0}function a(a){g.set(a,h(a)+1)}function b(){g.clear()}f.getCount=h;f.incrementCount=a;f.clear=b}),66);
__d("MWFallbackWithTimeout.react",["FBLogger","react","react-compiler-runtime","useTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useEffect;function a(a){var b=d("react-compiler-runtime").c(4),e=a.children,f=a.message;a=c("useTimeout")(1e4);var g=a.pending,h;b[0]!==f||b[1]!==g?(a=function(){g||c("FBLogger")("messenger_web_entrypoints","fallback_timeout").warn(f)},h=[f,g],b[0]=f,b[1]=g,b[2]=a,b[3]=h):(a=b[2],h=b[3]);i(a,h);return e}g["default"]=a}),98);
__d("MWGetCurrentThreadIDForLSThread",["I64","LSIntEnum","mwCMIsAnyCMThread","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e){if(e)return{NAME:"Page",VAL:(h||(h=d("I64"))).to_string(a)};else if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(7))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(15))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(16)))return{NAME:"UserSecret",VAL:(h||(h=d("I64"))).to_string(a)};else if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(1))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(13))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(201)))return{NAME:"User",VAL:(h||(h=d("I64"))).to_string(a)};else if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(2))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(5))||c("mwCMIsAnyCMThread")(b)||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(150))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(151))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(154))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(155))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(152))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(153))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(26)))return{NAME:"Group",VAL:(h||(h=d("I64"))).to_string(a)};throw c("unrecoverableViolation")("Unsupported MWMessagingThreadType "+(h||(h=d("I64"))).to_string(b),"messenger_web_messaging")}g.get=a}),98);
__d("MWNotificationRenderer.react",["fbt","I64","LSIntEnum"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a,b,c,e,f){if((i||(i=d("I64"))).equal(a.senderId,b))return h._("__JHASH__rY0dxFqgz-w__JHASH__");f=(b=(a=f.nickname)!=null?a:e.firstName)!=null?b:e.name;a=c.threadName;if(a!=null)return h._("__JHASH__OUbuC9yLTGc__JHASH__",[h._param("senderName",f),h._param("groupName",a)]);else if((i||(i=d("I64"))).equal(c.threadType,(j||(j=d("LSIntEnum"))).ofNumber(2)))return h._("__JHASH__xWtep4OGpvD__JHASH__",[h._param("name",f)]);else return h._("__JHASH__uh-zU0Y_fAB__JHASH__",[h._param("name",f)])}g.renderDocumentTitle=a}),226);
__d("MWLSChatPopperCommon",["CometSetBlinkingTitleMessageContext","CurrentUser","I64","MWChatConfig","MWChatSettingsQuery","MWNotificationRenderer.react","MWPIsThreadUnread","MessengerWebEventsFalcoEvent","ReQL","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=h||d("react");var j=e.useCallback,k=e.useContext,l=c("requireDeferred")("Sound").__setRef("MWLSChatPopperCommon");function m(a){var b=(i||(i=d("I64"))).to_string(a.senderId)!==c("CurrentUser").getID();b&&l.onReady(function(b){b.play([d("MWChatConfig").soundNotifOggUrl,d("MWChatConfig").soundNotifMp3Url],(i||(i=d("I64"))).to_float(a.timestampMs),!1)})}function a(a,b,e){var f=k(c("CometSetBlinkingTitleMessageContext"));return j(function(c,g,h,j){h=d("MWNotificationRenderer.react").renderDocumentTitle(c,b,g,h,j);e.contents!=null&&e.contents();e.contents=d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(g.threadKey).subscribe(function(a,b){if(b.operation==="add"||b.operation==="put"){a=b.value;if(d("MWPIsThreadUnread").isThreadUnread(a))return;e.contents!=null&&e.contents();e.contents=void 0;f(null,(i||(i=d("I64"))).to_float(a.lastReadWatermarkTimestampMs))}});f(h,(i||(i=d("I64"))).to_float(c.timestampMs))},[b,e,a,f])}function b(a){d("MWChatSettingsQuery").areChatTabsSoundsOn(function(b){if(b!=null&&b)return m(a);else c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"suppress_new_message_sound"}})})}g.useUpdateDocumentTitle=a;g.playChatTabSound=b}),98);
__d("MWLSChatTabPolicy",["$InternalEnum","I64","LSContactBlockedByViewerStatus","LSIntEnum","MWCMThreadTypes.react","MWChatSettingsQuery","MessagingFolderTag","MessengerWebEventsFalcoEvent","emptyFunction","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("$InternalEnum")({ALLOW:0,DENY:1});function k(a,b,c){if(c===j.ALLOW)return a(b)}var l=function(a){return c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"suppress_new_message",extra_data:{reason:a}}})},m=function(a){a(j.ALLOW)},n=function(a,b,c){(h||(h=d("I64"))).equal(b.senderId,c)?(l("message_outgoing"),a(j.DENY)):a(j.ALLOW)},o=function(a,b,e){if(c("gkx")("23433"))a(j.ALLOW);else{d("MWChatSettingsQuery").areChatTabsTurnedOff(function(c){c!=null&&c?(l("turn_off_chat_tab"),b!=null&&d("MWCMThreadTypes.react").isJoinedCMThread(b.threadType)&&e!=null&&e.logCancel("turn_off_chat_tab"),a(j.DENY)):a(j.ALLOW)});return}},p=function(a,b,c){var e=(h||(h=d("I64"))).to_float(b.muteExpireTimeMs);e>Date.now()||e<0?(l("mention_muted"),d("MWCMThreadTypes.react").isJoinedCMThread(b.threadType)&&c!=null&&c.logCancel("mention_muted"),a(j.DENY)):a(j.ALLOW)},q=function(a,b){b.isAdminMessage?(l("message_non_user_generated"),a(j.DENY)):a(j.ALLOW)},r=function(a,b){b.folderName===c("MessagingFolderTag").INBOX||(h||(h=d("I64"))).equal(b.parentThreadKey,(i||(i=d("LSIntEnum"))).ofNumber(-10))?a(j.ALLOW):(l("message_no_inbox"),a(j.DENY))},s=function(a,b){!(h||(h=d("I64"))).equal(b.blockedByViewerStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))?(l("message_blocked_participants"),a(j.DENY)):a(j.ALLOW)},t=function(a,b){d("MWCMThreadTypes.react").isJoinedCMThread(b.threadType)?(l("community_messaging_group_blocked"),a(j.DENY)):a(j.ALLOW)},u=function(a,b){b=b.mentionTypes;b!=null&&"s".includes(b)?a(j.DENY):a(j.ALLOW)},v=function(a,b){c("gkx")("23433")&&b?a(j.DENY):a(j.ALLOW)},w=function a(b,d){if(b.length===0)return function(a){return k(d,c("emptyFunction"),a)};var e=b[0],f=b.slice(1);return function(b){return k(e,a(f,d),b)}},x=function(a,b){var c=a[0];a=a.slice(1);c(w(a,b))};function a(a,b,c,d,e,f){return x([function(){return m.apply(void 0,arguments)},function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];return n.apply(void 0,c.concat([a,d]))},function(){return o.apply(void 0,arguments)},function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return p.apply(void 0,c.concat([b]))},function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return q.apply(void 0,c.concat([a]))},function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return r.apply(void 0,c.concat([b]))},function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return s.apply(void 0,b.concat([c]))},function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return t.apply(void 0,c.concat([b]))},function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return u.apply(void 0,c.concat([a]))},function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return v.apply(void 0,b.concat([e]))}],f)}function e(a,b,c,d){return x([function(){return m.apply(void 0,arguments)},function(){for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return o.apply(void 0,d.concat([a,b]))},function(){for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return p.apply(void 0,d.concat([a,b]))},function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return v.apply(void 0,b.concat([c]))}],d)}g.shouldMessageBeAllowed=a;g.shouldCommunityChatThreadPopup=e}),98);
__d("useMWChatOpenTabFromNewMessage",["I64","LSIntEnum","LSThreadAttributionStore","MWChatInteraction","MWChatStateActions","MWChatStateContext","MWChatStateV2.react","MWChatStateV2IsClosed","MWChatStateV2Types","MWChatThreadId","MessengerWebEventsFalcoEvent","ODS","gkx","react","react-compiler-runtime","setTimeout","useCometFeedNoRoutingNavigationEventLogger","useMWChatOpenTabTraceProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;(h||d("react")).useCallback;var l=new Set();function a(a,b){var e=d("react-compiler-runtime").c(7);b=b.withChatTabTracing;var f=b===void 0?!1:b,g=c("useCometFeedNoRoutingNavigationEventLogger")(),h=d("MWChatStateV2.react").useDispatch(),o=c("useMWChatOpenTabTraceProvider")(),p=d("MWChatStateContext").useChatState(n);e[0]!==p||e[1]!==h||e[2]!==a||e[3]!==g||e[4]!==o||e[5]!==f?(b=function(b,e,n){g(Date.now(),"","messenger");(i||(i=d("ODS"))).bumpEntityKey(3185,"mwchat_tab","open_incoming");c("MessengerWebEventsFalcoEvent").log(m);d("LSThreadAttributionStore").setSource(d("MWChatThreadId").getFBID(b),a);var q=Date.now(),r=function(a){a==null?void 0:a.addMarkerPoint("dispatch_open_chat_tab","AppTiming"),h(d("MWChatStateActions").openTabOrFlyout(q,{shouldFocus:!1},{threadKeyDescriptor:{clientThreadKey:void 0,threadKey:e.threadKey,threadType:e.threadType},type:d("MWChatStateV2Types").MWChatStateTabType.ChatTab}),!c("gkx")("24037"))},s=e.threadKey;b=Array.from(p.values()).find(function(a){if(a.tabType.type===d("MWChatStateV2Types").MWChatStateTabType.ChatTab){a=a.tabType.threadKeyDescriptor.threadKey;return(j||(j=d("I64"))).equal(s,a)}});var t=b!=null?d("MWChatStateV2IsClosed").isClosed(b):!1,u=l.has((j||(j=d("I64"))).to_string(s));u=f&&(b==null&&!u||b!=null&&t);u?(l.add((j||(j=d("I64"))).to_string(s)),o(function(a,b){d("MWChatInteraction").set((j||(j=d("I64"))).to_string(e.threadKey),a),b.onComplete(function(){l["delete"]((j||(j=d("I64"))).to_string(s))}),r(b)},(k||(k=d("LSIntEnum"))).unwrapIntEnum(e.threadType),"notificationInThreadReply",e.threadKey)):r();c("setTimeout")(function(){return h(d("MWChatStateActions").closeFlyout(q,e.threadKey))},3e3);return n()},e[0]=p,e[1]=h,e[2]=a,e[3]=g,e[4]=o,e[5]=f,e[6]=b):b=e[6];return b}function m(){return{event_name:"open_chat_tab_from_new_message"}}function n(a){return a.tabs}g["default"]=a}),98);
__d("MWLSCommunityChatPopper",["CometRelay","GroupsCometChatsEngagementLogger","I64","MWCMChatTabNotificationsQPLLoggingUtils","MWChatTabsNotificationSubscription","MWChatThreadPingCounter","MWGetCurrentThreadIDForLSThread","MWLSChatPopperCommon","MWLSChatTabPolicy","MWPActor.react","MercuryIDs","ReQL","gkx","promiseDone","react","react-compiler-runtime","useMWChatOpenTabFromNewMessage","useMWFamilyCenterContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");b.useCallback;var j=b.useEffect,k={contents:void 0};function l(a,b){var e=d("react-compiler-runtime").c(8),f=d("MWLSChatPopperCommon").useUpdateDocumentTitle(a,b,k);e[0]!==a.tables.contacts||e[1]!==a.tables.participants||e[2]!==a.tables.threads||e[3]!==f?(b=function(b){c("promiseDone")(window.Promise.all([a.tables.threads.get(b.threadKey),a.tables.contacts.get(b.senderId),a.tables.participants.get(b.threadKey,b.senderId)]),function(a){var e=a[0],g=a[1];a=a[2];if(g!=null&&a!=null){f(b,e,g,a);g=c("MercuryIDs").getThreadIDFromThreadFBID((i||(i=d("I64"))).to_string(e.threadKey));if(d("MWChatThreadPingCounter").getCount(g)<3){d("MWChatThreadPingCounter").incrementCount(g);d("MWLSChatPopperCommon").playChatTabSound(b);return}}})},e[0]=a.tables.contacts,e[1]=a.tables.participants,e[2]=a.tables.threads,e[3]=f,e[4]=b):b=e[4];var g=b;e[5]!==g||e[6]!==a.tables.messages?(b=function(b,e,f){var h={contents:m};h.contents=d("ReQL").fromTableAscending(a.tables.messages).getKeyRange((i||(i=d("I64"))).of_string(b),i.of_string(f),e).subscribe(function(a,b){if(b.operation==="add"){a=b.value;h.contents();g(a)}});c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.messages).getKeyRange(i.of_string(b),i.of_string(f),e)),function(a){a&&(h.contents(),g(a))})},e[5]=g,e[6]=a.tables.messages,e[7]=b):b=e[7];return b}function m(){}function a(a){var b=d("react-compiler-runtime").c(9),e=a.storage;a=a.withChatTabTracing;a=a===void 0?!1:a;var f;b[0]!==a?(f={withChatTabTracing:a},b[0]=a,b[1]=f):f=b[1];var g=c("useMWChatOpenTabFromNewMessage")("notificationInThreadReply",f);a=d("MWPActor.react").useActor();var h=c("CometRelay").useRelayEnvironment(),k=l(e,a);f=d("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext();var m=f.familyCenterData;b[2]!==h||b[3]!==m.hasActiveMsgrFamilyCenterEnforcement||b[4]!==g||b[5]!==e||b[6]!==k?(a=function(){var a=c("gkx")("24100");if(!a)return;var b=d("MWChatTabsNotificationSubscription").subscribe(h,function(a){a=(a==null?void 0:a.messenger_chat_tabs_notification_subscribe)||{};var b=a.message_id,f=a.message_timestamp,h=a.qpl_join_id,j=a.thread_id;if(j==null||f==null||b==null)return;var l=d("MWCMChatTabNotificationsQPLLoggingUtils").createChatTabQPLLogger();l.logEventStreamReceived(h);c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange((i||(i=d("I64"))).of_string(j))),function(a){a!=null&&(l.logThreadLoaded(),d("MWLSChatTabPolicy").shouldCommunityChatThreadPopup(a,l,m.hasActiveMsgrFamilyCenterEnforcement,function(){var c=d("MWGetCurrentThreadIDForLSThread").get(a.threadKey,a.threadType,!1);l.logOpenChatTab();g(c,a,function(){l.logOpenChatTabSuccess(),d("GroupsCometChatsEngagementLogger").log({action:"impression",event:"thread_open_auto",source:"auto_open_chat_tabs",surface:"auto_open_chat_tabs_container",thread_id:(i||(i=d("I64"))).to_string(a.threadKey)}),k(j,b,f)})}))})});return function(){b.dispose()}},f=[h,e,g,k,m.hasActiveMsgrFamilyCenterEnforcement],b[2]=h,b[3]=m.hasActiveMsgrFamilyCenterEnforcement,b[4]=g,b[5]=e,b[6]=k,b[7]=a,b[8]=f):(a=b[7],f=b[8]);j(a,f)}g.useOpenCommunityChatTabs=a}),98);
__d("MWSetupPresenceReportingDeferred.react",["CometPlaceholder.react","deferredLoadComponent","react","react-compiler-runtime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferred")("MWSetupPresenceReporting.react").__setRef("MWSetupPresenceReportingDeferred.react"));function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWSetupPresenceReportingDeferred",children:i.jsx(j,{})}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("MWV2Chat.react",["CometErrorBoundary.react","FBLogger","JSResourceForInteraction","LSDatabaseAfterInitSyncSingleton","LSDatabaseSingleton","LSPlatformClientProviderWithDeferredLoadingStrategy.react","LSPlatformMessengerConfig","MWChatDisabled.react","MWChatInteraction","MWXLazyPopoverTrigger.react","cr:11569","gkx","react","react-compiler-runtime","shouldHideChatOnAppsSubdomain"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;var k=e.useEffect,l=e.useLayoutEffect;function m(a){var b=c("FBLogger")("messenger_browser_clients");a!=null&&(b=b.catching(a));b.warn("Error loading MWV2Chat")}var n=c("JSResourceForInteraction")("MWChatErrorStatePopover.react").__setRef("MWV2Chat.react"),o=function(a){return j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{error:a},popoverResource:n,position:"above",visibleOnLoad:!0,children:function(a,b){return j.jsx(c("MWChatDisabled.react"),{contextRef:a,onPress:b})}})},p=!c("gkx")("22788")||!c("gkx")("22789")||c("shouldHideChatOnAppsSubdomain")();function a(){var a=d("react-compiler-runtime").c(3),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=[],a[0]=e):e=a[0];l(r,e);a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=[],a[1]=e):e=a[1];k(q,e);a[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(c("CometErrorBoundary.react"),{fallback:o,onError:m,children:p?j.jsx(c("MWChatDisabled.react"),{}):b("cr:11569")&&j.jsx(c("LSPlatformClientProviderWithDeferredLoadingStrategy.react"),{config:d("LSPlatformMessengerConfig").configEagerlyLoaded,errorFallback:o,children:j.jsx(b("cr:11569"),{})})}),a[2]=e):e=a[2];return e}function q(){(p||b("cr:11569")==null)&&d("LSDatabaseAfterInitSyncSingleton").resolveInitSync((i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton)}function r(){d("MWChatInteraction").addAutoChatTabMarkerPoint("mwv2_chat_rendered")}g["default"]=a}),98);
__d("MWV2ChatHeadsLayout.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.children;a=a;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c="x191j7n5 x92rtbv x10l6tqk x1useyqa",b[0]=c):c=b[0];b[1]!==a?(c=i.jsx("div",{className:c,children:a}),b[1]=a,b[2]=c):c=b[2];return c}g["default"]=a}),98);
__d("MWV2ChatOptionsHead.react",["fbt","ix","MWXDeferredPopoverTrigger.react","MWXIcon.react","MWXPressable.react","MWXTooltip.react","fbicon","react","react-compiler-runtime","requireDeferred"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useState,m=c("requireDeferred")("MWV2ChatOptionsHeadPopover.react").__setRef("MWV2ChatOptionsHead.react"),n={head:{alignItems:"x6s0dn4",backgroundColor:"x1l31dnx",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",boxShadow:"x1qeybcx",display:"x78zum5",height:"xc9qbxq",justifyContent:"xl56j7k",opacity:"xg01cxk",transform:"x1f85oc2",transitionDuration:"x19bguh7",transitionProperty:"x6o7n8i",width:"x14qfxbe",":hover_boxShadow":"x19xcq9t",$$css:!0},headVisible:{opacity:"x1hc1fzr",transform:"x3oybdh",$$css:!0}},o=h._("__JHASH__GqqnGnZcXBj__JHASH__");function a(a){var b=d("react-compiler-runtime").c(11),e=a.isVisible,f=a.openTabCount,g=a.style;a=l(!1);var h=a[0],j=a[1];a=l(!1);var p=a[0],q=a[1];a=l(!1);var r=a[0];a=a[1];f=f>0;var s;b[0]!==f?(s={hasOpenTabs:f},b[0]=f,b[1]=s):s=b[1];b[2]!==p||b[3]!==h||b[4]!==r||b[5]!==e||b[6]!==g?(f=function(a,b){return k.jsx("div",{className:"x14yjl9h xudhj91 x18nykt9 xww2gxu xc9qbxq xi8xln7 x10l6tqk x14qfxbe",style:g,children:k.jsx("div",{className:"x6s0dn4 xjbqb8w x78zum5 xnnlda6 xl56j7k x1tl9596 xhsvlbd x1dmp6jm","data-testid":void 0,onMouseEnter:function(){return j(!0)},onMouseLeave:function(){return j(!1)},children:k.jsx(c("MWXPressable.react"),{label:o,onFocusChange:function(a){return q(a)},onPress:b,ref:a,testid:void 0,xstyle:function(){return[n.head,e||h||p||r?n.headVisible:!1]},children:k.jsx(c("MWXTooltip.react"),{align:"middle",position:"start",tooltip:o,children:k.jsx(c("MWXIcon.react"),{icon:d("fbicon")._(i("484387"),20)})})})})})},b[2]=p,b[3]=h,b[4]=r,b[5]=e,b[6]=g,b[7]=f):f=b[7];b[8]!==s||b[9]!==f?(a=k.jsx(c("MWXDeferredPopoverTrigger.react"),{align:"end",onVisibilityChange:a,popoverProps:s,popoverResource:m,position:"above",children:f}),b[8]=s,b[9]=f,b[10]=a):a=b[10];return a}g["default"]=a}),226);
__d("useMWV2PreloadComposeTab",["JSResourceForInteraction","JSScheduler","react","react-compiler-runtime","useCometPreloader"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(h||d("react")).useCallback;var j=c("JSResourceForInteraction")("MWV2ComposeTab.react").__setRef("useMWV2PreloadComposeTab");function a(){var a=d("react-compiler-runtime").c(3),b=k;b=c("useCometPreloader")("button",b,b);var e=b.onHoverInPreloader;b=b.onHoverOutPreloader;var f;a[0]!==e||a[1]!==b?(f=[e,b],a[0]=e,a[1]=b,a[2]=f):f=a[2];return f}function k(){(i||(i=d("JSScheduler"))).scheduleSpeculativeCallback(l)}function l(){j.preload()}g["default"]=a}),98);
__d("MWV2ComposeHead.react",["fbt","ix","FDSTintedIcon_DEPRECATED.react","LSThreadAttributionStore","MWChatInteraction","MWChatStateV2.react","MWChatStateV2Types","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","fbicon","react","react-compiler-runtime","useMWNewChatOpenTabTraceProvider","useMWV2PreloadComposeTab"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={button:{alignItems:"x6s0dn4",appearance:"xjyslct",backgroundColor:"x1l31dnx",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",boxShadow:"x1qeybcx",display:"x3nfvp2",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",":hover_boxShadow":"x19xcq9t",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(16),e=a.onFocusChange;a=a.onHoverChange;var f=d("MWChatStateV2.react").useDispatch(),g=c("MessengerWebUXLogger").useInteractionLogger(),j=c("useMWNewChatOpenTabTraceProvider")(),l;b[0]!==f||b[1]!==g||b[2]!==j?(l=function(){j(function(a){d("MWChatInteraction").set("open_new",a);g==null?void 0:g({eventName:"create_thread"});d("LSThreadAttributionStore").setSourceForNewThread("chatheadsNewMessage");var b=Date.now();a=function(a){return{clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:a.closeWatermark,doNotBlockWithEBUpsell:!0,minimizeWatermark:a.minimizeWatermark,openFlyoutWatermark:a.openFlyoutWatermark,openWatermark:b,tabId:a.tabId,tabType:a.tabType}};var c=function(a){var c=a.openWatermark<a.closeWatermark;if(c)return{clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:a.closeWatermark,minimizeWatermark:a.minimizeWatermark,openFlyoutWatermark:a.openFlyoutWatermark,openWatermark:b,tabId:a.tabId,tabType:a.tabType};else return{clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:b,minimizeWatermark:a.minimizeWatermark,openFlyoutWatermark:a.openFlyoutWatermark,openWatermark:a.openWatermark,tabId:a.tabId,tabType:a.tabType}};return f([{inserter:a,tabConfig:{shouldFocus:!0},tabType:{initialTokens:[],secureThreadToggleEnabled:!1,type:d("MWChatStateV2Types").MWChatStateTabType.ComposeTab},type:d("MWChatStateV2Types").MWChatStateActionsType.UpsertTab,updater:c}])},"chatheadsNewMessage")},b[0]=f,b[1]=g,b[2]=j,b[3]=l):l=b[3];l=l;var n=c("useMWV2PreloadComposeTab")(),o=n[0];n=n[1];var p,q,r,s,t;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(q=h._("__JHASH__lMGuJRoIOm8__JHASH__"),p=c("MWXTooltip.react"),r="middle",s="start",t=q.toString(),b[4]=p,b[5]=q,b[6]=r,b[7]=s,b[8]=t):(p=b[4],q=b[5],r=b[6],s=b[7],t=b[8]);var u;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(u=k.jsx(c("FDSTintedIcon_DEPRECATED.react"),{color:"primary",icon:d("fbicon")._(i("507172"),20)}),b[9]=u):u=b[9];b[10]!==o||b[11]!==n||b[12]!==e||b[13]!==a||b[14]!==l?(p=k.jsx(p,{align:r,position:s,tooltip:t,children:k.jsx(c("MWXPressable.react"),{"aria-label":q,onFocusChange:e,onHoverChange:a,onHoverIn:o,onHoverOut:n,onPress:l,role:"button",testid:void 0,xstyle:m,children:u})}),b[10]=o,b[11]=n,b[12]=e,b[13]=a,b[14]=l,b[15]=p):p=b[15];return p}function m(){return[l.button]}g["default"]=a}),226);
__d("MWV2ChatHeads.react",["CometErrorBoundary.react","CometHeroInteractionWithDiv.react","CometPlaceholder.react","I64","JSResourceForInteraction","MWChatInteraction","MWChatStateContext","MWChatStateV2HeadGroups","MWChatStateV2TabGroups","MWChatStateV2Types","MWPActor.react","MWV2ChatHeadsLayout.react","MWV2ChatOptionsHead.react","MWV2ComposeHead.react","WebUXLoggingEntryPointContextProvider","lazyLoadComponent","react","react-compiler-runtime","useMWChatStateV2MaxTabCount"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useState,l=5,m=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWV2ChatHead.react").__setRef("MWV2ChatHeads.react")),n=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWV2ChatOverflowHead.react").__setRef("MWV2ChatHeads.react"));function o(a){return{transform:"translateY(-"+Math.imul(a,58)+"px)"}}function p(a){return{transform:"translateY(-"+(Math.imul(a,58)-12)+"px"}}function a(a){var b=d("react-compiler-runtime").c(30);a=a.isMediaViewer;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=d("MWPActor.react").isAPPlus(),b[0]=e):e=b[0];e=e;var f=d("MWChatStateContext").useChatState(s),g=f[0],h=f[1];f=f[2];var t=c("useMWChatStateV2MaxTabCount")(a);h=d("MWChatStateV2TabGroups").getTabGroups(f,g,h,t);t=h.openExcessTabs;h=h.openTabs;a=d("MWChatStateV2HeadGroups").getHeadGroups(a?f:void 0,t,g,l);f=a[0];t=a[1];g=h.length;a=f.length;var u=t.length>0?1:0;h=k(!1);var v=h[0],w=h[1],x;h=t[0];if(t.length===1&&h.tabType.type!==d("MWChatStateV2Types").MWChatStateTabType.ComposeTab){h=h.tabType.threadKeyDescriptor;var y=(i||(i=d("I64"))).to_string(h.threadKey),z;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(z=o(1),b[1]=z):z=b[1];var A=t[0];b[2]!==w||b[3]!==A||b[4]!==h?(z=j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWV2ChatHeads.ExcessHeads",children:j.jsx(m,{onFocusChange:w,onHoverChange:w,style:z,tab:A,threadKeyDescriptor:h})}),b[2]=w,b[3]=A,b[4]=h,b[5]=z):z=b[5];x=j.jsx(c("CometErrorBoundary.react"),{fallback:r,children:z},y)}else if(t.length>1){b[6]===Symbol["for"]("react.memo_cache_sentinel")?(A=o(1),b[6]=A):A=b[6];b[7]!==t||b[8]!==w?(h=j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWV2ChatHeads.ChatOverflowHead",children:j.jsx(n,{excessHeads:t,onHoverChange:w,style:A})}),b[7]=t,b[8]=w,b[9]=h):h=b[9];x=h}b[10]===Symbol["for"]("react.memo_cache_sentinel")?(z=d("MWChatInteraction").get(d("MWChatInteraction").MW_CHATHEADS_LOAD),b[10]=z):z=b[10];b[11]!==a||b[12]!==v||b[13]!==g||b[14]!==u?(y=c("MWV2ChatOptionsHead.react")!=null&&g+a>=2?j.jsx(c("MWV2ChatOptionsHead.react"),{isVisible:v,openTabCount:g,style:p(a+u+1)}):null,b[11]=a,b[12]=v,b[13]=g,b[14]=u,b[15]=y):y=b[15];if(b[16]!==f||b[17]!==u||b[18]!==w){b[20]!==u||b[21]!==w?(A=function(a,b){var e=a.tabType;if(e.type===d("MWChatStateV2Types").MWChatStateTabType.ComposeTab)return null;b=b+u+1;return j.jsx(c("CometErrorBoundary.react"),{fallback:q,children:j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWV2ChatHeads.ChatHead",children:j.jsx(m,{onFocusChange:w,onHoverChange:w,style:o(b),tab:a,threadKeyDescriptor:e.threadKeyDescriptor})})},(i||(i=d("I64"))).to_string(e.threadKeyDescriptor.threadKey))},b[20]=u,b[21]=w,b[22]=A):A=b[22];t=f.reverse().map(A);b[16]=f;b[17]=u;b[18]=w;b[19]=t}else t=b[19];b[23]!==w?(h=!e&&j.jsx(c("MWV2ComposeHead.react"),{onFocusChange:w,onHoverChange:w}),b[23]=w,b[24]=h):h=b[24];b[25]!==x||b[26]!==y||b[27]!==t||b[28]!==h?(a=j.jsx(d("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:"chat_heads",children:j.jsx(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"Comet initial load to chatheads VC",interactionUUID:z,children:j.jsxs(c("MWV2ChatHeadsLayout.react"),{children:[y,t,x,h]})})}),b[25]=x,b[26]=y,b[27]=t,b[28]=h,b[29]=a):a=b[29];return a}function q(){return null}function r(){return null}function s(a){return[a.tabs,a.focusedTabId,a.mediaViewerOpenWatermark]}g.MAX_CHAT_HEADS=l;g.MWV2ChatHeads=a}),98);
__d("MWV2ChatTabsLayout.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.children;a=a;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c="x1ey2m1c x78zum5 x164qtfw xixxii4 x1vjfegm",b[0]=c):c=b[0];b[1]!==a?(c=i.jsx("div",{className:c,"data-testid":void 0,children:a}),b[1]=a,b[2]=c):c=b[2];return c}g["default"]=a}),98);
__d("useMWMonitorChatConnectionStatus",["I64","LSIntEnum","LSInternetConnectionState","MWGetChatTabOpenQPLEventTrace","ReQL","gkx","promiseDone","react","react-compiler-runtime","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");b.useCallback;var k=b.useEffect,l=b.useRef,m=function(a){return(i||(i=d("I64"))).equal(a.internetConnectionState,(j||(j=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED))?"connected":"not_connected"};function a(a){var b=d("react-compiler-runtime").c(6),e=c("useAsyncReStore")(),f=l(null),g=l(null),h;b[0]!==a?(h=function(b){c("MWGetChatTabOpenQPLEventTrace")(a,function(a){a.addMarkerPoint("connectivity_status_"+b,"AppTiming")})},b[0]=a,b[1]=h):h=b[1];var i=h,j;b[2]!==i||b[3]!==e?(h=function(){if(!c("gkx")("3822"))return;e.then(function(a){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.tables.connectivity_status).map(m)).then(function(a){if(a!==g.current){var b;i((b=a)!=null?b:"connection_is_not_created");g.current=a}})),f.current=a.tables.connectivity_status.subscribe(function(a,b){if(b.operation==="add"){a=m(b.value);a!==g.current&&(i(a),g.current=a)}})});return function(){f.current!=null&&f.current()}},j=[i,e,f],b[2]=i,b[3]=e,b[4]=h,b[5]=j):(h=b[4],j=b[5]);k(h,j)}g["default"]=a}),98);
__d("MWV2ChatTabs.react",["CometErrorBoundary.react","CometPlaceholder.react","HeroInteractionIgnoreWithDiv.react","I64","JSResourceForInteraction","MAWEditMessageContext.react","MWChatInteraction","MWChatStateContext","MWChatStateV2CompareTabs","MWChatStateV2HeadGroups","MWChatStateV2TabGroups","MWChatStateV2Types","MWPReplyContext.react","MWV2ChatHeads.react","MWV2ChatTabLoadingWithGlimmers.react","MWV2ChatTabsLayout.react","MWV2EnsureThatChatTabExists","MWV2IsTabFocusedContext.react","cr:7101","hero-tracing","justknobx","lazyLoadComponent","react","react-compiler-runtime","useCometDisplayTimingTrackerForInteraction","useMWChatStateV2MaxTabCount","useMWMonitorChatConnectionStatus"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;e.useCallback;var k=e.useContext;f=b("cr:7101")||{};var l=f.MWComposerKeyCommandFocusManager,m=f.MWComposerKeyCommandFocusManagerTabIndex,n=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWV2ComposeTab.react").__setRef("MWV2ChatTabs.react")),o=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("MWV2ChatTabs.react"));function p(a){var b=d("react-compiler-runtime").c(4),e=a.isMinimized,f=a.tab;a=a.threadKeyDescriptor;d("MWV2EnsureThatChatTabExists").useMWV2EnsureThatChatTabExists(a.threadKey,a.threadType,a.clientThreadKey);c("useMWMonitorChatConnectionStatus")(a.threadKey);var g;b[0]!==e||b[1]!==f||b[2]!==a?(g=j.jsx(o,{isMinimized:e,tab:f,threadKeyDescriptor:a}),b[0]=e,b[1]=f,b[2]=a,b[3]=g):g=b[3];return g}function a(a){var b=d("react-compiler-runtime").c(4);a=a.isMediaViewer;var e=k(d("MWChatStateContext").stateContext),f=d("MWChatStateContext").useChatState(t),g=f[0];f=f[1];var h=c("useMWChatStateV2MaxTabCount")(a);h=d("MWChatStateV2TabGroups").getTabGroups(a?f:void 0,e.tabs,g,h);var i=h.minimizedTabs,o=h.openExcessTabs,u=h.openTabs;h=d("MWChatStateV2HeadGroups").getHeadGroups(a?f:void 0,o,e.tabs,d("MWV2ChatHeads.react").MAX_CHAT_HEADS);var v=h[1],w=s,x=c("useCometDisplayTimingTrackerForInteraction")("ChatMain",!0);a=c("justknobx")._("1857")?i.filter(function(a){return!v.includes(a)}):i;f=[].concat(u,a,o).sort(d("MWChatStateV2CompareTabs").byMostRecentOpened);e=f.map(function(a,b){var e=g===a.tabId,f=a.tabType,h,i=u.indexOf(a)===-1;f.type===d("MWChatStateV2Types").MWChatStateTabType.ComposeTab?h=j.jsx(n,{initialTokens:f.initialTokens,tab:a},f.initialTokens.map(r).join()):h=j.jsx(p,{isMinimized:i,tab:a,threadKeyDescriptor:f.threadKeyDescriptor});f=j.jsx(d("MWV2IsTabFocusedContext.react").MWV2IsTabFocusedContextProvider,{isFocused:e,children:j.jsx(d("MWPReplyContext.react").MWPReplyContextProvider,{children:j.jsx(d("MAWEditMessageContext.react").MAWEditMessageContext,{children:j.jsx(c("HeroInteractionIgnoreWithDiv.react"),{children:j.jsx(d("hero-tracing").HeroInteraction,{alwaysMarkMutationRootAsVisualChange:!0,interactionDesc:"MWV2_CHAT_TAB",interactionUUID:w(a.tabType),pageletName:"ChatTab",ref:x,children:j.jsx(c("CometPlaceholder.react"),{fallback:i?null:j.jsx(c("MWV2ChatTabLoadingWithGlimmers.react"),{tab:a}),name:"MWV2ChatTabs",children:h})})})})})});return j.jsx(c("CometErrorBoundary.react"),{fallback:q,children:m==null?f:j.jsx(m,{value:b,children:f})},String(a.tabId))});b[0]!==e?(h=l==null?e:j.jsx(l,{children:e}),b[0]=e,b[1]=h):h=b[1];b[2]!==h?(i=j.jsx(c("MWV2ChatTabsLayout.react"),{children:h}),b[2]=h,b[3]=i):i=b[3];return i}function q(){return null}function r(a){return a.id}function s(a){if(a.type===d("MWChatStateV2Types").MWChatStateTabType.ComposeTab)return null;else return d("MWChatInteraction").get((i||(i=d("I64"))).to_string(a.threadKeyDescriptor.threadKey))}function t(a){return[a.focusedTabId,a.mediaViewerOpenWatermark]}g["default"]=a}),98);
__d("useMWLSChatPopperUpper",["Env","FBLogger","I64","JSResourceForInteraction","LSContactType","LSIntEnum","LSMessagingThreadTypeUtil","MWChatMessagesOnChatTabLoadTracker","MWChatThreadPingCounter","MWGetCurrentThreadIDForLSThread","MWLSChatPopperCommon","MWLSChatTabPolicy","MWPActor.react","MWXacGating","MercuryIDs","ReQL","ServerTime","VisibilityAPI","asyncToGeneratorRuntime","clearInterval","isMWXacGroupThread","isMessengerPWA","justknobx","promiseDone","qex","react","react-compiler-runtime","requireDeferred","setInterval","useGlobalEventListener","useMWChatOpenTabFromNewMessage","useMWFamilyCenterContext","useMWNavigation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;e=i||d("react");var l=e.useEffect,m=e.useRef,n=c("requireDeferred")("MWDesktopNotifications").__setRef("useMWLSChatPopperUpper"),o=c("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("useMWLSChatPopperUpper"),p={contents:void 0};function q(a,e,f,g,i,l,m,p,q,r,s){s===void 0&&(s=d("MWLSChatTabPolicy").shouldMessageBeAllowed);var t=d("MWGetCurrentThreadIDForLSThread").get(g.threadKey,g.threadType,(j||(j=d("I64"))).equal(i.contactType,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE))||(j||(j=d("I64"))).equal(i.contactType,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE_PERSONA)));return s(f,g,i,p,q,function(){c("promiseDone")(o.load());var k=d("MercuryIDs").getThreadIDFromThreadFBID((j||(j=d("I64"))).to_string(g.threadKey));d("MWChatMessagesOnChatTabLoadTracker").trackReceivedFor(g.threadKey);return a(t,g,function(){m(f,g,i,l);if(d("VisibilityAPI").isVisibilityHidden()===!0){var a,j=c("isMessengerPWA")()&&c("justknobx")._("1465");a=!c("isMessengerPWA")()&&(h||(h=c("Env"))).isMessengerDotComOnComet===!0&&Notification.permission==="granted"&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType)&&((a=c("qex")._("1981"))!=null?a:!1);(j||a)&&c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield n.load());a=a.triggerLocalNotification;yield a(e,f,r)})())}if(d("MWChatThreadPingCounter").getCount(k)<3){d("MWChatThreadPingCounter").incrementCount(k);d("MWLSChatPopperCommon").playChatTabSound(f);return}})})}function r(a){var b=a.actor,d=a.hasActiveMsgrFamilyCenterEnforcement,e=a.message,f=a.navigationApi,g=a.openTabFromNewMessage,h=a.shouldBeAllowed,i=a.storage,j=a.updateDocumentTitle;c("promiseDone")(window.Promise.all([i.tables.threads.get(e.threadKey),i.tables.contacts.get(e.senderId),i.tables.participants.get(e.threadKey,e.senderId)]),function(a){var k=a[0],l=a[1];a=a[2];if(k==null){c("FBLogger")("messenger_web_entrypoints").mustfix("Thread is null when receiving a new message");return}if(l!=null&&a!=null)return q(g,i,e,k,l,a,j,b,d,f,h)})}function s(a){var b=a.actor,d=a.hasActiveMsgrFamilyCenterEnforcement,e=a.message,f=a.navigationApi,g=a.openTabFromNewMessage,h=a.shouldBeAllowed,i=a.storage,j=a.updateDocumentTitle;c("promiseDone")(window.Promise.all([i.tables.threads.get(e.threadKey),i.tables.contacts.get(e.senderId),i.tables.participants.get(e.threadKey,e.senderId)]),function(a){var k=a[0],l=a[1];a=a[2];if(k!=null&&l!=null&&a!=null&&!c("isMWXacGroupThread")(k))return q(g,i,e,k,l,a,j,b,d,f,h)})}function t(a){var b=d("react-compiler-runtime").c(11),e=a.storage;a=a.withChatTabTracing;a=a===void 0?!1:a;var f;b[0]!==a?(f={withChatTabTracing:a},b[0]=a,b[1]=f):f=b[1];var g=c("useMWChatOpenTabFromNewMessage")("notificationInThreadReply",f),h=d("MWPActor.react").useActor(),i=d("MWLSChatPopperCommon").useUpdateDocumentTitle(e,h,p);b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=d("ServerTime").getMillis(),b[2]=a):a=b[2];var k=m(a),n=c("useMWNavigation")();f=d("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext();var o=f.familyCenterData;b[3]!==h||b[4]!==o.hasActiveMsgrFamilyCenterEnforcement||b[5]!==n||b[6]!==g||b[7]!==e||b[8]!==i?(a=function(){return d("ReQL").fromTableAscending(e.tables.messages).subscribe(function(a,b){if(b.operation==="add"){a=b.value;if((j||(j=d("I64"))).to_float(a.timestampMs)<=k.current)return;k.current=(j||(j=d("I64"))).to_float(a.timestampMs);b=d("MWXacGating").isGroupsEnabled()?r:s;return b({actor:h,hasActiveMsgrFamilyCenterEnforcement:o.hasActiveMsgrFamilyCenterEnforcement,message:a,navigationApi:n,openTabFromNewMessage:g,storage:e,updateDocumentTitle:i})}})},f=[h,n,o.hasActiveMsgrFamilyCenterEnforcement,g,e,i],b[3]=h,b[4]=o.hasActiveMsgrFamilyCenterEnforcement,b[5]=n,b[6]=g,b[7]=e,b[8]=i,b[9]=a,b[10]=f):(a=b[9],f=b[10]);l(a,f)}function a(a){var b=d("react-compiler-runtime").c(10),e=a.storage;a=a.withChatTabTracing;a=a===void 0?!1:a;var f;b[0]!==e||b[1]!==a?(f={storage:e,withChatTabTracing:a},b[0]=e,b[1]=a,b[2]=f):f=b[2];t(f);var g=m();b[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){var a=g.current;if(a!=null){c("clearInterval")(a);return}},b[3]=e):e=b[3];var h=e;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){h(),g.current=c("setInterval")(u,6e5)},b[4]=a):a=b[4];f=a;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){d("MWChatThreadPingCounter").clear();return h()},b[5]=e):e=b[5];a=e;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(e={},b[6]=e):e=b[6];c("useGlobalEventListener")("blur",f,e);b[7]===Symbol["for"]("react.memo_cache_sentinel")?(f={},b[7]=f):f=b[7];c("useGlobalEventListener")("focus",a,f);b[8]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){return function(){return h()}},a=[],b[8]=e,b[9]=a):(e=b[8],a=b[9]);l(e,a)}function u(){return d("MWChatThreadPingCounter").clear()}g["default"]=a}),98);
__d("useSubscribeToErrorTableAndShowToast",["ReQL","react","react-compiler-runtime","requireDeferred","translatedServerString","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect,k=c("requireDeferred")("LSUserVisibleErrorsUtil").__setRef("useSubscribeToErrorTableAndShowToast"),l=c("requireDeferred")("mwPushToast").__setRef("useSubscribeToErrorTableAndShowToast"),m={contents:!1};function a(){var a=d("react-compiler-runtime").c(3),b=(h||(h=c("useReStore")))(),e,f;a[0]!==b?(e=function(){if(m.contents)return;m.contents=!0;var a=d("ReQL").fromTableAscending(b.tables.user_visible_errors).subscribe(function(a,d){switch(d.operation){case"add":var e=d.value;a=e.presentationStyle;if(a!=null&&a!=="toast"&&a!=="undefined")return;l.onReady(function(a){a.mwPushErrorToast({body:e.errorBodyText!=null?c("translatedServerString")(e.errorBodyText):void 0,onDismiss:function(){k.onReady(function(a){a.removeUserVisibleErrorFromTable(b,e.errorId)})},title:c("translatedServerString")(e.errorTitleText)})});return;case"put":case"delete":return}});return function(){m.contents=!1;return a()}},f=[b],a[0]=b,a[1]=e,a[2]=f):(e=a[1],f=a[2]);return j(e,f)}g["default"]=a}),98);
__d("useMWChatInit",["MWLSCommunityChatPopper","MWPGetThreadTitle","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useMWLSChatPopperUpper","useReStore","useSubscribeToErrorTableAndShowToast"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect;function a(){var a=d("react-compiler-runtime").c(12),b=(h||(h=c("useReStore")))(),e;a[0]!==b.tables.community_folders||a[1]!==b.tables.contacts||a[2]!==b.tables.participants||a[3]!==b.tables.pinned_threads||a[4]!==b.tables.threads?(e=function(){var a;c("promiseDone")((a=d("ReQL")).toArrayAsync(a.fromTableAscending(b.tables.threads).map(function(a){return[a,d("ReQLSuspense").toArray(d("ReQL").leftJoin(d("ReQL").fromTableAscending(b.tables.participants,[]).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(b.tables.contacts)).take(d("MWPGetThreadTitle").amountToFetchForTitle),f.id+":34")]}).take(30)));c("promiseDone")(a.toArrayAsync(a.fromTableAscending(b.tables.pinned_threads.index("pinnedTimestamp"))));c("promiseDone")(a.toArrayAsync(a.fromTableAscending(b.tables.community_folders)))},a[0]=b.tables.community_folders,a[1]=b.tables.contacts,a[2]=b.tables.participants,a[3]=b.tables.pinned_threads,a[4]=b.tables.threads,a[5]=e):e=a[5];var g;a[6]!==b?(g=[b],a[6]=b,a[7]=g):g=a[7];j(e,g);c("useSubscribeToErrorTableAndShowToast")();a[8]!==b?(e={storage:b,withChatTabTracing:!0},a[8]=b,a[9]=e):e=a[9];c("useMWLSChatPopperUpper")(e);a[10]!==b?(g={storage:b,withChatTabTracing:!0},a[10]=b,a[11]=g):g=a[11];d("MWLSCommunityChatPopper").useOpenCommunityChatTabs(g)}g["default"]=a}),98);
__d("useMWIsAPPlusChannelsInbox",["useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useCometRouterState")();if(a==null)return!1;var b=a.main;a=a.pushViewStack;a=a&&a.length>0?a[a.length-1]:b;return((b=a.route)==null?void 0:b.tracePolicy)==="comet.messenger.applus.inbox"}g["default"]=a}),98);
__d("useMWIsTopLevelRouteMessengerMediaViewer",["useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useCometRouterState")();if(a==null)return!1;var b=a.main;a=a.pushViewStack;a=a&&a.length>0?a[a.length-1]:b;return((b=a.route)==null?void 0:b.tracePolicy)==="comet.sharedmediaviewer.media"}g["default"]=a}),98);
__d("useMWV2ChatUpdateMediaViewerOpenWatermark",["MWChatStateActions","MWChatStateV2.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=d("MWChatStateV2.react").useDispatch(),c;a[0]!==b?(c=function(){var a=Date.now();b(d("MWChatStateActions").updateMediaViewerOpenWatermark(a))},a[0]=b,a[1]=c):c=a[1];return c}g["default"]=a}),98);
__d("MWV2CookieWriter",["DeferredCookie","I64","MWCMThreadTypes.react","MWChatStateV2Types","Promise","ReQL","promiseDone","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){switch(Number((i||(i=d("I64"))).to_string(a))){case 2:return"g.";case 15:return"sc.";case 16:return"sg.";case 18:return"cg.";case 19:return"cgu.";case 23:return"cbj.";case 24:return"cbu.";case 21:return"cphj.";case 22:return"cphu.";case 150:return"dp.";case 151:return"dpu.";case 152:return"dpb.";case 153:return"dpbu.";case 154:return"dp2.";case 155:return"dp2u.";default:return"u."}}function a(a,e,f){var g=function(a){if(e==null)return!1;var b=e.tabType;if(b.type===d("MWChatStateV2Types").MWChatStateTabType.ComposeTab)return!1;else return(i||(i=d("I64"))).equal(b.threadKeyDescriptor.threadKey,a)},k=function(a){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.tables.threads).getKeyRange(a))},l={contents:void 0};a=a.map(function(a){var c=a.isOpen,e=a.threadKey,f=a.threadType,m={o:c?1:0};return k(e).then(function(a){if(a!=null)if(g(e)){d("MWCMThreadTypes.react").isJoinedCMThread(f)&&(l.contents=(i||(i=d("I64"))).to_string(a.parentThreadKey));return(h||(h=b("Promise"))).resolve()}else{m.i=j(f)+(i||(i=d("I64"))).to_string(e);d("MWCMThreadTypes.react").isJoinedCMThread(f)&&(m.p=(i||(i=d("I64"))).to_string(a.parentThreadKey));return(h||(h=b("Promise"))).resolve(m)}else{m.i=j(f)+(i||(i=d("I64"))).to_string(e);return(h||(h=b("Promise"))).resolve(m)}})});c("promiseDone")((h||(h=b("Promise"))).all(a).then(function(a){var f;if(e!=null){var g=e.tabType;if(g.type===d("MWChatStateV2Types").MWChatStateTabType.ComposeTab)f=void 0;else{g=g.threadKeyDescriptor;var k=g.threadKey;g=g.threadType;f=j(g)+(i||(i=d("I64"))).to_string(k)}}else f=void 0;g=a.filter(function(a){return a!=null});k=l.contents;a=k!=null?JSON.stringify({lm3:f,lm3p:k,t3:g,utc3:Date.now(),v:1}):JSON.stringify({lm3:f,t3:g,utc3:Date.now(),v:1});a!=null?c("DeferredCookie").addToQueue("presence","C"+a,0,"/",!1,!1,!0):c("recoverableViolation")("Failed to serialize cookie","messenger_comet");return(h||(h=b("Promise"))).resolve()}))}g.write=a}),98);
__d("useMWV2CookieWriter",["MWChatStateContext","MWChatStateV2CompareTabs","MWChatStateV2IsOpen","MWChatStateV2Types","MWV2CookieWriter","gkx","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect;function a(){var a=d("react-compiler-runtime").c(4),b=d("MWChatStateContext").useChatState(n),e=(h||(h=c("useReStore")))(),f,g;a[0]!==e||a[1]!==b?(f=function(){var a=Array.from(b.values()).filter(m).sort(d("MWChatStateV2CompareTabs").byMostRecentOpened)[0],c=[];Array.from(b.values()).filter(l).sort(k).forEach(function(a){a=a.tabType;if(a.type===d("MWChatStateV2Types").MWChatStateTabType.ComposeTab)return;c.push(babelHelpers["extends"]({},a.threadKeyDescriptor,{isOpen:!1}))});d("MWV2CookieWriter").write(c,a,e)},g=[e,b],a[0]=e,a[1]=b,a[2]=f,a[3]=g):(f=a[2],g=a[3]);j(f,g)}function k(a,b){var c=d("MWChatStateV2CompareTabs").byMostRecentMinimized(a,b);if(c===0)return d("MWChatStateV2CompareTabs").byMostRecentOpened(a,b);else return c}function l(a){if(a.openWatermark>a.closeWatermark)return!0;else return a.minimizeWatermark>a.closeWatermark}function m(a){return d("MWChatStateV2IsOpen").isOpen(void 0,a)}function n(a){return a.tabs}function b(){}e=c("gkx")("24038")?a:b;f=e;g["default"]=f}),98);
__d("MWV2ChatTabsRoot.react",["CometContextualLayerAnchorRoot.react","CometDOMOnlyBoundary.react","CometPlaceholder.react","FocusRegion.react","MWChatStateV2.react","MWChatVisibilityOverrideContext","MWFallbackWithTimeout.react","MWLSThreadDisplayContext","MWV2ChatHeads.react","MWV2ChatTabs.react","WebUXLoggingEntryPointContextProvider","cr:7641","cr:905","focusScopeQueries","react","react-compiler-runtime","stylex","useMWChatInit","useMWIsAPPlusChannelsInbox","useMWIsTopLevelRouteMediaViewerExperiment","useMWIsTopLevelRouteMessengerMediaViewer","useMWV2ChatUpdateMediaViewerOpenWatermark","useMWV2CookieWriter","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));f=i;var k=f.useEffect;f.useMemo;function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={},a[0]=b):b=a[0];return b}var l=(f=b("cr:905"))!=null?f:a,m={chatAbovePushView:{zIndex:"x1vjfegm",$$css:!0},hidden:{display:"x1s85apg",$$css:!0},root:{bottom:"x1ey2m1c",end:"xds687c",position:"xixxii4",$$css:!0}};function n(a){var b=d("react-compiler-runtime").c(16);a=a.isMediaViewer;var e=d("MWChatStateV2.react").useChatState(p),f=c("useMWIsTopLevelRouteMessengerMediaViewer")();e=Array.from(e.values()).some(o);e=e;f=f?m.hidden:null;var g;b[0]!==f?(g=(h||(h=c("stylex")))(m.root,m.chatAbovePushView,f),b[0]=f,b[1]=g):g=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f="xuk3077 x78zum5 xc8icb0",b[2]=f):f=b[2];e=e?d("focusScopeQueries").tabbableScopeQuery:void 0;var i;b[3]!==a?(i=j.jsx(c("MWV2ChatTabs.react"),{isMediaViewer:a}),b[3]=a,b[4]=i):i=b[4];var k;b[5]!==a?(k=j.jsx(c("CometDOMOnlyBoundary.react"),{children:j.jsx(d("MWV2ChatHeads.react").MWV2ChatHeads,{isMediaViewer:a})}),b[5]=a,b[6]=k):k=b[6];b[7]!==i||b[8]!==k?(a=j.jsxs(j.Fragment,{children:[i,k]}),b[7]=i,b[8]=k,b[9]=a):a=b[9];b[10]!==e||b[11]!==a?(i=j.jsx(c("CometContextualLayerAnchorRoot.react"),{children:j.jsx("div",{className:f,children:j.jsx(d("FocusRegion.react").FocusRegion,{containFocusQuery:e,id:"MWV2ChatTabsRootChatTabsFocusRegion",children:a})})}),b[10]=e,b[11]=a,b[12]=i):i=b[12];b[13]!==g||b[14]!==i?(k=j.jsx(d("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:"popup_chat_box",children:j.jsx(d("MWLSThreadDisplayContext").MWLSThreadDisplayContextProvider,{value:"ChatTab",children:j.jsx("div",{className:g,children:i})})}),b[13]=g,b[14]=i,b[15]=k):k=b[15];f=k;return f}function o(a){return a.openWatermark>a.closeWatermark}function p(a){return a.tabs}function q(a){a=a.children;c("useMWV2CookieWriter")();c("useMWChatInit")();return a}function e(){var a=d("react-compiler-runtime").c(11),e=c("useMWIsTopLevelRouteMediaViewerExperiment")(),f=d("MWChatVisibilityOverrideContext").useMWChatVisibilityOverride(e),g=c("useMWV2ChatUpdateMediaViewerOpenWatermark")(),h=c("useMWIsAPPlusChannelsInbox")();f=c("useShouldShowMessagingEntrypointInCometRoot")("CHAT_TABS_ROOT")&&f&&!h;var i;a[0]!==e||a[1]!==g?(h=function(){e&&g()},i=[e,g],a[0]=e,a[1]=g,a[2]=h,a[3]=i):(h=a[2],i=a[3]);k(h,i);l();a[4]===Symbol["for"]("react.memo_cache_sentinel")?(h=j.jsx(c("MWFallbackWithTimeout.react"),{message:"MWV2ChatTabsRoot suspense timeout"}),a[4]=h):h=a[4];a[5]===Symbol["for"]("react.memo_cache_sentinel")?(i=b("cr:7641")&&j.jsx(b("cr:7641"),{}),a[5]=i):i=a[5];var m;a[6]!==e||a[7]!==f?(m=f?j.jsx(n,{isMediaViewer:e}):null,a[6]=e,a[7]=f,a[8]=m):m=a[8];a[9]!==m?(f=j.jsxs(c("CometPlaceholder.react"),{fallback:h,name:"MWV2ChatTabsRoot",children:[i,j.jsx(q,{children:m})]}),a[9]=m,a[10]=f):f=a[10];h=f;return h}g["default"]=e}),98);
__d("MWV2ChatContainer.react",["MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react","MWV2ChatTabsRoot.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsxs(i.Fragment,{children:[i.jsx(c("MWV2ChatTabsRoot.react"),{}),i.jsx(c("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react"),{})]}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("SearchCometGlobalTypeaheadInputStrategy.react",["CometTypeaheadInputRoundedStrategy.react","SearchCometTypeaheadEventEmitterContext","cr:2012305","react","react-compiler-runtime","useMergeRefs","useRefEffect","useSearchCometEventEmitterContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useEffect,k=e.useRef;f=i.forwardRef(a);function a(a,e){var f=d("react-compiler-runtime").c(13),g,h;f[0]!==a?(g=a.onChange,h=babelHelpers.objectWithoutPropertiesLoose(a,["onChange"]),f[0]=a,f[1]=g,f[2]=h):(g=f[1],h=f[2]);a=(a=c("useSearchCometEventEmitterContext")(c("SearchCometTypeaheadEventEmitterContext")))!=null?a:{};var l=a.subscribeToGlobalTypeaheadFocus,m;f[3]!==g||f[4]!==l?(a=function(a){return l==null?void 0:l(function(){if(a==null)return;a.value="";a.focus();g("")})},m=[g,l],f[3]=g,f[4]=l,f[5]=a,f[6]=m):(a=f[5],m=f[6]);a=c("useRefEffect")(a,m);var n=k(null),o=k(!1),p;f[7]===Symbol["for"]("react.memo_cache_sentinel")?(m=function(){var a=n.current;if(b("cr:2012305")!=null&&a!=null&&o.current===!1){b("cr:2012305").trackTypingPerf(a,"top_tab_serp_typeahead");o.current=!0;return function(){b("cr:2012305").unregisterTypingPerf(a),o.current=!1}}},p=[],f[7]=m,f[8]=p):(m=f[7],p=f[8]);j(m,p);m=c("useMergeRefs")(a,n);p=c("useMergeRefs")(m,e);f[9]!==p||f[10]!==g||f[11]!==h?(a=i.jsx(c("CometTypeaheadInputRoundedStrategy.react"),babelHelpers["extends"]({},h,{onChange:g,ref:p})),f[9]=p,f[10]=g,f[11]=h,f[12]=a):a=f[12];return a}e=f;g["default"]=e}),98);
__d("useCometInternalTypeaheadHeroTracing",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a,b){var c=a?a.getInteractionUUID():null,d=a?a.getVCTrackerRef():null,e=c!=null&&a!=null&&!a.isResolved();return i(function(){var f=function(c,d){a&&d!=null&&a.setEventStartTime(d.timeStamp),b(c,d)};return{interactionUUID:c,onTracedChange:f,shouldHoldHeroTracing:e,vcTrackerRef:d}},[c,b,e,a,d])}g["default"]=a}),98);
__d("SearchCometGlobalTypeaheadLayoutContextualStrategy.react",["CometHeroHoldTrigger.react","CometHeroInteractionWithDiv.react","CometTypeaheadInternalLayoutInlineStrategy.react","react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadFetch","useCometInternalTypeaheadHeroTracing","useCometInternalTypeaheadState","useCometTypeaheadInputRefs","useCometTypeaheadInternalLayoutContextualStrategyHandlers","useCometTypeaheadLayoutContextualStrategyARIAProps","useSearchCometGlobalTypeaheadStyles"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(74),e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;b[0]!==a?(y=a.extraLayoutProps,f=a.helperText,g=a.label,h=a.onAbandonTypeahead_DO_NOT_USE,j=a.onBlur,k=a.onChange,l=a.onClick,m=a.onDownArrow,n=a.onEnter,o=a.onEscape,p=a.onHighlightEntry,r=a.onOutsideClick,s=a.onPressEntry,u=a.onShiftTab,v=a.onTab,w=a.onUpArrow,z=a.traceProvider,q=a.onLeftArrow,t=a.onRightArrow,A=a.viewRole,e=a.inputRef,B=a.xstyles,x=babelHelpers.objectWithoutPropertiesLoose(a,["extraLayoutProps","helperText","label","onAbandonTypeahead_DO_NOT_USE","onBlur","onChange","onClick","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onShiftTab","onTab","onUpArrow","traceProvider","onLeftArrow","onRightArrow","viewRole","inputRef","xstyles"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=j,b[6]=k,b[7]=l,b[8]=m,b[9]=n,b[10]=o,b[11]=p,b[12]=q,b[13]=r,b[14]=s,b[15]=t,b[16]=u,b[17]=v,b[18]=w,b[19]=x,b[20]=y,b[21]=z,b[22]=A,b[23]=B):(e=b[1],f=b[2],g=b[3],h=b[4],j=b[5],k=b[6],l=b[7],m=b[8],n=b[9],o=b[10],p=b[11],q=b[12],r=b[13],s=b[14],t=b[15],u=b[16],v=b[17],w=b[18],x=b[19],y=b[20],z=b[21],A=b[22],B=b[23]);b[24]!==y?(a=y===void 0?{}:y,b[24]=y,b[25]=a):a=b[25];y=a;a=y.afterViewContent;y=y.beforeViewContent;var C=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();C=C.isOpened;var D=c("useCometInternalTypeaheadState")(),E=D.activeEntries,F=D.highlightedEntry;D=D.secondaryActionHighlighted;var G=c("useCometInternalTypeaheadFetch")();G=G.isLoading;e=c("useCometTypeaheadInputRefs")(e);var H=e.composedRef;e=e.inputRef;var I=c("useSearchCometGlobalTypeaheadStyles")();B=(B=B)!=null?B:I;I=c("useCometInternalTypeaheadHeroTracing")(z,k);z=I.interactionUUID;k=I.onTracedChange;var J=I.shouldHoldHeroTracing;I=I.vcTrackerRef;var K;b[26]!==h||b[27]!==j||b[28]!==l||b[29]!==m||b[30]!==n||b[31]!==o||b[32]!==p||b[33]!==q||b[34]!==r||b[35]!==s||b[36]!==t||b[37]!==u||b[38]!==v||b[39]!==k||b[40]!==w?(K={onAbandonTypeahead_DO_NOT_USE:h,onBlur:j,onChange:k,onClick:l,onDownArrow:m,onEnter:n,onEscape:o,onHighlightEntry:p,onLeftArrow:q,onOutsideClick:r,onPressEntry:s,onRightArrow:t,onShiftTab:u,onTab:v,onUpArrow:w},b[26]=h,b[27]=j,b[28]=l,b[29]=m,b[30]=n,b[31]=o,b[32]=p,b[33]=q,b[34]=r,b[35]=s,b[36]=t,b[37]=u,b[38]=v,b[39]=k,b[40]=w,b[41]=K):K=b[41];b[42]!==e||b[43]!==K?(h={handlers:K,inputRef:e},b[42]=e,b[43]=K,b[44]=h):h=b[44];j=c("useCometTypeaheadInternalLayoutContextualStrategyHandlers")(h);b[45]!==E||b[46]!==f||b[47]!==F||b[48]!==C||b[49]!==g||b[50]!==D||b[51]!==A?(l={activeEntries:E,helperText:f,highlightedEntry:F,inputLabel:g,isOpened:C,secondaryActionHighlighted:D,viewRole:A},b[45]=E,b[46]=f,b[47]=F,b[48]=C,b[49]=g,b[50]=D,b[51]=A,b[52]=l):l=b[52];m=c("useCometTypeaheadLayoutContextualStrategyARIAProps")(l);b[53]!==J?(n=i.jsx(c("CometHeroHoldTrigger.react"),{description:"SearchInternalTypeahead",hold:J}),b[53]=J,b[54]=n):n=b[54];b[55]!==a||b[56]!==m||b[57]!==y||b[58]!==G||b[59]!==C?(o={afterViewContent:a,ariaProps:m,beforeViewContent:y,helperTextComponent:null,isLoading:G,isOpened:C},b[55]=a,b[56]=m,b[57]=y,b[58]=G,b[59]=C,b[60]=o):o=b[60];b[61]!==H||b[62]!==j||b[63]!==g||b[64]!==x||b[65]!==o||b[66]!==A||b[67]!==B?(p=i.jsx(c("CometTypeaheadInternalLayoutInlineStrategy.react"),babelHelpers["extends"]({},x,j,{extraLayoutProps:o,inputRef:H,label:g,viewRole:A,xstyles:B})),b[61]=H,b[62]=j,b[63]=g,b[64]=x,b[65]=o,b[66]=A,b[67]=B,b[68]=p):p=b[68];b[69]!==z||b[70]!==n||b[71]!==p||b[72]!==I?(q=i.jsxs(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"Search_Typeahead",interactionUUID:z,ref:I,children:[n,p]}),b[69]=z,b[70]=n,b[71]=p,b[72]=I,b[73]=q):q=b[73];return q}g["default"]=a}),98);
__d("SearchCometInterestsDeepDiveExperiments",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("24247")}g.hasTypeaheadRedirection=a}),98);
__d("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry",["Base64","ConstUriUtils","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","XCometSearchResultsControllerRouteBuilder","react-compiler-runtime","searchCometTypeaheadGetHighConfidenceResult","searchCometTypeaheadGetStsDisambiguation","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsEntryPointSurface","useSearchCometResultsURLBuilder"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("react-compiler-runtime").c(5),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={routeBuilder:c("XCometSearchResultsControllerRouteBuilder")},a[0]=b):b=a[0];var e=c("useSearchCometResultsURLBuilder")(b),f=c("useSearchCometHashtagRouteUrlBuilder")(),g=c("useSearchCometResultsEntryPointSurface")();a[1]!==f||a[2]!==g||a[3]!==e?(b=function(a){var b=a.entry,h=a.queryString;a=a.typeaheadSessionID;var i=b.label.toLowerCase(),j=b.metaData;j=j==null?void 0:j.markers;var k=d("SearchCometInterestsDeepDiveUtil").getHashtagTag(i);if(d("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&k!=null&&!j.has("see_all"))return f({entryPointAction:"SEARCH_BOX",exploreEntryPoint:h===""?3:4,hashtag:k,typeaheadSessionID:a});else{h=b.rawData;k=(k=c("searchCometTypeaheadGetStsDisambiguation")(b))!=null?k:void 0;if(b.subtype==="keyword"&&j.has("disambiguation")){h=(j=(j=h.structuredInfo)==null?void 0:(h=j.disambiguation_result)==null?void 0:h.disambiguation_info_list[0])!=null?j:{};j=h.link_url;if(j!=null){h=d("ConstUriUtils").getUri(j);if(h!=null){j=new Map();g!=null&&j.set("__eps__",g);k!==void 0&&j.set("__stsd__",c("Base64").encode(JSON.stringify(k)));var l=new Map();for(var j=j,m=Array.isArray(j),n=0,j=m?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=j.length)break;o=j[n++]}else{n=j.next();if(n.done)break;o=n.value}o=o;var p=o[0];o=o[1];l.set(p,o)}p=h.addQueryParams(l);if(p!=null)return p.toString()}}}return e({entryPointAction:"SEARCH_BOX",highConfidenceResult:c("searchCometTypeaheadGetHighConfidenceResult")(b),query:i,stsDisambiguation:k,typeaheadSessionID:a})}},a[1]=f,a[2]=g,a[3]=e,a[4]=b):b=a[4];return b}g["default"]=a}),98);
__d("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps",["react","react-compiler-runtime","useCometRouterDispatcher","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(10),e=a.entry;a=a.queryString;var f=c("useCometRouterDispatcher")(),g=c("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),h;b[0]!==g||b[1]!==e||b[2]!==a?(h=g({entry:e,queryString:a}),b[0]=g,b[1]=e,b[2]=a,b[3]=h):h=b[3];g=h;var j=g;b[4]!==f||b[5]!==j?(e=function(){f!=null&&f.preloadRouteCode(j)},a=[f,j],b[4]=f,b[5]=j,b[6]=e,b[7]=a):(e=b[6],a=b[7]);i(e,a);b[8]!==j?(h={preloadCodeOnMount:!0,preventLocalNavigation:!0,url:j},b[8]=j,b[9]=h):h=b[9];g=h;return g}g["default"]=a}),98);
__d("useSearchCometGlobalTypeaheadViewStrategy",["fbt","CometSearchTypeaheadBaseViewRecentEmptyState.react","react","searchCometTypeaheadSTSMappings","useSearchCometGlobalTypeaheadKeywordViewItemLinkProps","useSearchCometTypeaheadViewListStrategy"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useMemo,l={view:{backgroundColor:"x1jx94hy",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"x1iofjn4",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}};function a(a){a=a.onHeaderActionPress;var b=k(function(){return[l.view]},[]),d=k(function(){return j.jsx(c("CometSearchTypeaheadBaseViewRecentEmptyState.react"),{})},[]);return c("useSearchCometTypeaheadViewListStrategy")({additionalEntryMappings:c("searchCometTypeaheadSTSMappings"),emptyStateContent:d,getLinkProps:c("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps"),isScrollable:!0,onHeaderActionPress:a,seeAllLabelBuilder:m,xstyle:b})}function m(a){return h._("__JHASH__LChIaXBIwAT__JHASH__",[h._implicitParam("=m1",j.jsx("strong",{children:h._("__JHASH__BFbyaDXF_eS__JHASH__",[h._param("query",a)])}))])}m.displayName=m.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6484597208256495"}),null);
__d("useSearchCometTypeaheadBootstrapValidationQuery.graphql",["useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"params",variableName:"input"}],concreteType:"SearchClientCachePolicyCheckResult",kind:"LinkedField",name:"search_client_cache_policy_check",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchClientCachePolicyDecision",kind:"LinkedField",name:"policy_decision",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cache_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ids_to_remove",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"force_cache_refresh",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:c},params:{id:b("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"),metadata:{},name:"useSearchCometTypeaheadBootstrapValidationQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useSearchCometTypeaheadBootstrapValidation",["CometRelay","CometRelayErrorHandling","filterNulls","react","react-compiler-runtime","recoverableViolation","useSearchCometTypeaheadBootstrapValidationQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;function a(a){var e=d("react-compiler-runtime").c(3),f=a.bootstrapDatasource,g=d("CometRelay").useRelayEnvironment();e[0]!==f||e[1]!==g?(a={validate:function(a){a=c("filterNulls")(a.map(k));d("CometRelay").fetchQuery(g,h!==void 0?h:h=b("useSearchCometTypeaheadBootstrapValidationQuery.graphql"),{input:{cache_types:["KEYWORD_BOOTSTRAP"],shown_suggestions:a}}).subscribe({error:j,next:function(a){a=a.search_client_cache_policy_check;for(var a=(a=a==null?void 0:a.policy_decision)!=null?a:[],b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var e=d.cache_type,g=d.force_cache_refresh;d=d.ids_to_remove;if(e==="KEYWORD_BOOTSTRAP"){for(var e=d,d=Array.isArray(e),h=0,e=d?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(d){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;f.removeEntriesByEntID(i)}g===!0&&(f.clear(),f.bootstrap())}}}})}},e[0]=f,e[1]=g,e[2]=a):a=e[2];e=a;return e}function j(a){d("CometRelayErrorHandling").markErrorAsHandled(a)}function k(a){if(a.subtype!=="bootstrap")return null;a=(a=a.rawData.structuredInfo)!=null?a:{};a=a.direct_nav_result;if(a==null)return null;var b=a.ent_id;a=a.title;if(b==null||a==null){c("recoverableViolation")("Unexpected missing ent_id or title on direct_nav_result","search");return null}return{id:b,keyword:a}}g["default"]=a}),98);
__d("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){function b(b){var c=d("react-compiler-runtime").c(15),e,f,g,h,j;c[0]!==b?(e=b.inputRef,f=b.onChange,g=b.onPressEntry,j=b.shouldQueryStringUpdateFromSelectedEntryOnClick,h=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef","onChange","onPressEntry","shouldQueryStringUpdateFromSelectedEntryOnClick"]),c[0]=b,c[1]=e,c[2]=f,c[3]=g,c[4]=h,c[5]=j):(e=c[1],f=c[2],g=c[3],h=c[4],j=c[5]);b=j===void 0?!1:j;c[6]!==f||c[7]!==g?(j=function(b,c){var a=b.metaData,d=b.subtype;a=a.markers;d=d==="recent"&&a.has("entity")||a.has("direct_nav");f(d?"":b.label);g==null?void 0:g(b,c)},c[6]=f,c[7]=g,c[8]=j):j=c[8];j=j;var k;c[9]!==e||c[10]!==j||c[11]!==f||c[12]!==h||c[13]!==b?(k=i.jsx(a,babelHelpers["extends"]({},h,{inputRef:e,onChange:f,onPressEntry:j,shouldQueryStringUpdateFromSelectedEntryOnClick:b})),c[9]=e,c[10]=j,c[11]=f,c[12]=h,c[13]=b,c[14]=k):k=c[14];return k}return b}g["default"]=a}),98);
__d("withSearchCometGlobalTypeaheadFocusKeyboardShortcut",["cometGetKeyCommandConfig","react","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometTypeaheadInputRefs","useGlobalKeyCommands"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useMemo;function a(a){function b(b){var e=b.inputRef;b=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef"]);e=c("useCometTypeaheadInputRefs")(e);var f=e.composedRef,g=e.inputRef;e=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();var h=e.dispatchIsOpened,l=j(function(){g.current!=null&&(g.current.focus(),h(!0))},[g,h]);e=k(function(){return[d("cometGetKeyCommandConfig").getCometKeyCommandConfig("global","search",l)]},[l]);c("useGlobalKeyCommands")(e);return i.jsx(a,babelHelpers["extends"]({},b,{inputRef:f}))}b.displayName=b.name+" [from "+f.id+"]";return b}g["default"]=a}),98);
__d("withSearchCometTypeaheadTraceEndReasonDecorator",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){function b(b){var c=d("react-compiler-runtime").c(13),e,f,g,h;c[0]!==b?(e=b.inputRef,f=b.onPressEntry,h=b.traceProvider,g=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef","onPressEntry","traceProvider"]),c[0]=b,c[1]=e,c[2]=f,c[3]=g,c[4]=h):(e=c[1],f=c[2],g=c[3],h=c[4]);c[5]!==f||c[6]!==h?(b=function(a,b){h&&h.setEndReason("successful_user_action"),f==null?void 0:f(a,b)},c[5]=f,c[6]=h,c[7]=b):b=c[7];b=b;var j;c[8]!==e||c[9]!==b||c[10]!==g||c[11]!==h?(j=i.jsx(a,babelHelpers["extends"]({},g,{inputRef:e,onPressEntry:b,traceProvider:h})),c[8]=e,c[9]=b,c[10]=g,c[11]=h,c[12]=j):j=c[12];return j}return b}g["default"]=a}),98);
__d("SearchCometGlobalTypeahead.react",["fbt","BaseTypeahead.react","CometErrorBoundary.react","CometTypeaheadErrorFallback.react","FBLogger","SearchCometGlobalTypeaheadInputStrategy.react","SearchCometGlobalTypeaheadLayoutContextualStrategy.react","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","SearchCometTypeaheadLoggingContextProvider","XCometSearchResultsControllerRouteBuilder","emptyFunction","qex","react","react-compiler-runtime","react-forget-runtime","requireDeferred","searchCometGlobalTypeahead.config","unrecoverableViolation","useCometSearchTypeaheadTraceProvider","useCometTypeaheadNavigate","useCometTypeaheadStateQueryString","useSearchCometGlobalTypeaheadCompositeDataSource","useSearchCometGlobalTypeaheadNullStateDataSource","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry","useSearchCometGlobalTypeaheadViewStrategy","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsURLBuilder","useSearchCometTypeaheadBootstrapValidation","useSearchCometTypeaheadLoggingProvider","useSearchCometTypeaheadRecentDataSourceContextDecorator","useStable","withSearchCometGlobalTypeaheadCleanStateOnEntrySelection","withSearchCometGlobalTypeaheadFocusKeyboardShortcut","withSearchCometTypeaheadBaseNavigationDecorator","withSearchCometTypeaheadSERPWarmCallDecorator","withSearchCometTypeaheadTraceEndReasonDecorator"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;b.useContext;var k=b.useEffect;b.useMemo;var l=b.useRef,m=c("requireDeferred")("ODS").__setRef("SearchCometGlobalTypeahead.react"),n=(e=c("qex")._("7"))!=null?e:!1;function a(a){var b=d("react-compiler-runtime").c(73),e,f,g,i,t,u,v,w,x,y;b[0]!==a?(y=a.autoOpen,e=a.inputXStyle,g=a.onClose,i=a.onEscape,t=a.onFocus,u=a.onHeaderActionPress,v=a.onPressEntry,w=a.onSelectFreeformQuery,f=a.queryString,x=babelHelpers.objectWithoutPropertiesLoose(a,["autoOpen","inputXStyle","onClose","onEscape","onFocus","onHeaderActionPress","onPressEntry","onSelectFreeformQuery","queryString"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=t,b[6]=u,b[7]=v,b[8]=w,b[9]=x,b[10]=y):(e=b[1],f=b[2],g=b[3],i=b[4],t=b[5],u=b[6],v=b[7],w=b[8],x=b[9],y=b[10]);a=y===void 0?!1:y;y=c("useCometTypeaheadStateQueryString")(f);var z=y[0];f=y[1];var A=c("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")();b[11]===Symbol["for"]("react.memo_cache_sentinel")?(y={routeBuilder:c("XCometSearchResultsControllerRouteBuilder")},b[11]=y):y=b[11];var B=c("useSearchCometResultsURLBuilder")(y),C=c("useSearchCometHashtagRouteUrlBuilder")();b[12]===Symbol["for"]("react.memo_cache_sentinel")?(y={tapPoint:"tap_search_bar"},b[12]=y):y=b[12];var D=c("useCometTypeaheadNavigate")(y),E=l(!1);y=c("useSearchCometGlobalTypeaheadNullStateDataSource")();var F;b[13]!==y?(F={config:c("searchCometGlobalTypeahead.config"),recentDataSource:y},b[13]=y,b[14]=F):F=b[14];var G=c("useSearchCometGlobalTypeaheadCompositeDataSource")(F);b[15]!==G?(y=G.getBootstrapKeywordsDataSource(),b[15]=G,b[16]=y):y=b[16];F=y;if(F==null)throw c("unrecoverableViolation")("Bootstrap datasource is missing","search");b[17]!==F?(y={bootstrapDatasource:F},b[17]=F,b[18]=y):y=b[18];F=c("useSearchCometTypeaheadBootstrapValidation")(y);var H=F.validate;b[19]!==H?(y=function(a){a=a.shownEntries;H(a)},b[19]=H,b[20]=y):y=b[20];var I=y;F=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("SearchCometTypeaheadLoggingContextProvider").CometLoggingProviderContext,r);y=F.logger;var J=F.onSessionStart,K=F.setSessionEndCallback;F=F.traceProvider;var L;L=y;F=F;var M;b[21]!==I?(M={context:"search_global",onSessionEnd:I},b[21]=I,b[22]=M):M=b[22];M=c("useSearchCometTypeaheadLoggingProvider")(M);c("useCometSearchTypeaheadTraceProvider")(y||M);k(function(){K(I)},[K,I]);if(L==null){L=M;m.onReady(q);throw c("FBLogger")("search").mustfix("Typeahead used without logger in context")}if(F==null)throw c("FBLogger")("search").mustfix("Typeahead used without traceProvider in context");y=c("useSearchCometTypeaheadRecentDataSourceContextDecorator")(G,!1);b[23]===Symbol["for"]("react.memo_cache_sentinel")?(M={decorate:c("withSearchCometGlobalTypeaheadFocusKeyboardShortcut")},b[23]=M):M=b[23];b[24]!==y?(M=[y,M].filter(Boolean),b[24]=y,b[25]=M):M=b[25];y=M;M=y;var N;b[26]!==G?(y=function(){G.bootstrap()},N=[G],b[26]=G,b[27]=y,b[28]=N):(y=b[27],N=b[28]);k(y,N);b[29]!==t||b[30]!==J?(y=function(){E.current=!0,J(),t&&t()},b[29]=t,b[30]=J,b[31]=y):y=b[31];N=y;b[32]!==L||b[33]!==D||b[34]!==v||b[35]!==z||b[36]!==A?(y=function(a,b){var c;if(b===!0)return;b=a.metaData;b=b==null?void 0:b.markers;var d=b!=null&&b.has("entity");b=b!=null&&b.has("direct_nav");c=A({entry:a,queryString:z,typeaheadSessionID:(c=L)==null?void 0:c.getSessionID()});c=s(a,c,d,b);D(c);v==null?void 0:v(a)},b[32]=L,b[33]=D,b[34]=v,b[35]=z,b[36]=A,b[37]=y):y=b[37];L;y=y;var O;b[38]!==C||b[39]!==L||b[40]!==D||b[41]!==w||b[42]!==z||b[43]!==B?(O=function(a){var b=d("SearchCometInterestsDeepDiveUtil").getHashtagTag(a);if(d("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&b!=null){b=C({entryPointAction:"SEARCH_BOX",exploreEntryPoint:z===""?3:4,hashtag:b,typeaheadSessionID:(b=L)==null?void 0:b.getSessionID()})}else{var c;b=B({entryPointAction:"SEARCH_BOX",query:a,typeaheadSessionID:(c=L)==null?void 0:c.getSessionID()})}D(b);w==null?void 0:w(a)},b[38]=C,b[39]=L,b[40]=D,b[41]=w,b[42]=z,b[43]=B,b[44]=O):O=b[44];L;O=O;var P;b[45]!==G||b[46]!==g?(P=function(){G.clearQueryCache(),g&&g()},b[45]=G,b[46]=g,b[47]=P):P=b[47];P=P;var Q=c("useStable")(p),R;b[48]===Symbol["for"]("react.memo_cache_sentinel")?(R=h._("__JHASH___9EIWdQL4U5__JHASH__"),b[48]=R):R=b[48];R=R;var S=z==="";S=S?"grid":"listbox";var T;b[49]===Symbol["for"]("react.memo_cache_sentinel")?(T={bypassCacheRenderLimitCheck:n},b[49]=T):T=b[49];var U=x.inputEndContent,V;b[50]!==e?(V={hideIconOnFocus:!0,size:"large",xstyle:e},b[50]=e,b[51]=V):V=b[51];e=x.inputStartContent;var W;b[52]===Symbol["for"]("react.memo_cache_sentinel")?(W=h._("__JHASH__oTSOcwn1bTU__JHASH__"),b[52]=W):W=b[52];var X=L,Y;b[53]!==u?(Y={onHeaderActionPress:u},b[53]=u,b[54]=Y):Y=b[54];u=c("useSearchCometGlobalTypeaheadViewStrategy")(Y);b[55]!==Q||b[56]!==a||b[57]!==G||b[58]!==P||b[59]!==N||b[60]!==y||b[61]!==O||b[62]!==i||b[63]!==x||b[64]!==z||b[65]!==f||b[66]!==M||b[67]!==V||b[68]!==X||b[69]!==u||b[70]!==F||b[71]!==S?(Y=j.jsx(c("CometErrorBoundary.react"),{fallback:o,children:j.jsx(Q,babelHelpers["extends"]({},x,{autoOpen:a,dataSource:G,dataSourceFetchConfigParams:T,decorators:M,inputEndContent:U,inputExtraProps:V,inputStartContent:e,inputStrategyRenderer:c("SearchCometGlobalTypeaheadInputStrategy.react"),label:W,layoutStrategyRenderer:c("SearchCometGlobalTypeaheadLayoutContextualStrategy.react"),loggingProvider:X,onChange:f,onClose:P,onEscape:i,onFocus:N,onPressEntry:y,onSelectFreeformQuery:O,placeholder:R,queryString:z,testid:void 0,traceProvider:F,viewRole:S,viewStrategyRenderer:u}))}),b[55]=Q,b[56]=a,b[57]=G,b[58]=P,b[59]=N,b[60]=y,b[61]=O,b[62]=i,b[63]=x,b[64]=z,b[65]=f,b[66]=M,b[67]=V,b[68]=X,b[69]=u,b[70]=F,b[71]=S,b[72]=Y):Y=b[72];return Y}function o(){return j.jsx(c("CometTypeaheadErrorFallback.react"),{})}o.displayName=o.name+" [from "+f.id+"]";function p(){var a;return((a=c("withSearchCometTypeaheadSERPWarmCallDecorator"))!=null?a:c("emptyFunction").thatReturnsArgument)(c("withSearchCometTypeaheadTraceEndReasonDecorator")(c("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection")(c("withSearchCometTypeaheadBaseNavigationDecorator")(c("BaseTypeahead.react")))))}function q(a){a.bumpEntityKey(354,"typeahead.missing_logger_context","focused")}function r(a){return[a.logger,a.onSessionStart,a.setSessionEndCallback,a.traceProvider]}function s(a,b,c,d){var e=a.rawData,f;if(e!=null&&a.subtype==="recent"&&c){f=e==null?void 0:(c=e.profile)==null?void 0:c.url}if(e!=null&&(a.subtype==="keyword"||a.subtype==="bootstrap"||a.subtype==="recent")&&d){f=e==null?void 0:(c=e.structuredInfo)==null?void 0:(a=c.direct_nav_result)==null?void 0:a.link_url}return(d=f)!=null?d:b}g["default"]=a}),226);